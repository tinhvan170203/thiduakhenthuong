import{r as o,j as e,c as Y,_ as x,m as b,T as _,R as G,h as K,u as Q,e as J,d as U,Q as A}from"./index-371a4e8f.js";import"./index.esm-a80e06b2.js";import{u as X}from"./index.esm-dbde89ce.js";import{d as Z}from"./Search-d057eaaa.js";import{T as E,a as f,P as S,b as ee,c as te,d as ne,e as ae,f as re,g as M,h as R,i as $,j as I}from"./LastPage-410e0def.js";import{d as ie}from"./dayjs.min-9420a05b.js";import{P as oe,B as se,I as C}from"./MenuItem-0a823130.js";import{m as le,d as ue,_ as j,a as V}from"./memoize-one.esm-8b357e52.js";import{T as B}from"./ButtonBase-3ca56fd5.js";import{t as de}from"./thongkeApi-1c610a45.js";import{B as ce}from"./Button-c29e04f7.js";import"./createSvgIcon-b5eb2c40.js";const me=({row:s,page:n,rowsPerPage:t,index:a,onClickOpenDialogEdit:i,onClickOpenDialogDelete:r})=>(o.useState(null),e.jsxs(E,{className:"hover:bg-slate-200 transition duration-300",children:[e.jsx(f,{className:"border-r border-slate-300",align:"left",style:{fontWeight:"bold",fontSize:"13px"},children:ie(s.createdAt).format("DD/MM/YYYY lúc hh:mm")}),e.jsx(f,{className:"border-r border-slate-300",align:"left",style:{fontSize:"13px",minWidth:"350px"},children:s.user.tenhienthi}),e.jsx(f,{className:"border-r border-slate-300",align:"left",style:{fontSize:"13px"},children:s.action})]},s._id));function O(s){const n=Y(),{count:t,page:a,rowsPerPage:i,onPageChange:r}=s,m=l=>{r(l,0)},c=l=>{r(l,a-1)},p=l=>{r(l,a+1)},h=l=>{r(l,Math.max(0,Math.ceil(t/i)-1))};return e.jsxs(se,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(C,{onClick:m,disabled:a===0,"aria-label":"first page",children:n.direction==="rtl"?e.jsx(M,{}):e.jsx(R,{})}),e.jsx(C,{onClick:c,disabled:a===0,"aria-label":"previous page",children:n.direction==="rtl"?e.jsx($,{}):e.jsx(I,{})}),e.jsx(C,{onClick:p,disabled:a>=Math.ceil(t/i)-1,"aria-label":"next page",children:n.direction==="rtl"?e.jsx(I,{}):e.jsx($,{})}),e.jsx(C,{onClick:h,disabled:a>=Math.ceil(t/i)-1,"aria-label":"last page",children:n.direction==="rtl"?e.jsx(R,{}):e.jsx(M,{})})]})}O.propTypes={count:S.number.isRequired,onPageChange:S.func.isRequired,page:S.number.isRequired,rowsPerPage:S.number.isRequired};function pe({list:s,onClickOpenDialogEdit:n,onClickOpenDialogDelete:t}){const[a,i]=o.useState(0),[r,m]=o.useState(10),c=a>0?Math.max(0,(1+a)*r-s.length):0,p=(l,d)=>{i(d)},h=l=>{m(parseInt(l.target.value,10)),i(0)};return e.jsxs(e.Fragment,{children:[e.jsx(ee,{component:oe,children:e.jsxs(te,{"aria-label":"custom pagination table",children:[e.jsx(ne,{children:e.jsxs(E,{children:[e.jsx(f,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(4, 93, 145)"},children:"Thời gian"}),e.jsx(f,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(4, 93, 145)"},children:"Tài khoản"}),e.jsx(f,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(4, 93, 145)"},children:"Thao tác hệ thống"})]})}),e.jsxs(ae,{children:[(r>0?s.slice(a*r,a*r+r):s).map((l,d)=>e.jsx(me,{row:l,page:a,rowsPerPage:r,index:d+1,onClickOpenDialogEdit:n,onClickOpenDialogDelete:t},l._id)),c>0&&e.jsx(E,{style:{height:53*c},children:e.jsx(f,{colSpan:6})})]})]})}),e.jsx("div",{children:e.jsx(re,{rowsPerPageOptions:[10,25,50,100,{label:"Tất cả",value:-1}],count:s.length,rowsPerPage:r,page:a,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},component:"div",onPageChange:p,onRowsPerPageChange:h,ActionsComponent:O,labelRowsPerPage:"Số bản ghi hiển thị trên mỗi trang",labelDisplayedRows:function({from:d,to:u,count:g}){return`hiển thị ${d} đến ${u} bản ghi trong tổng số ${g!==-1?g:`more than ${u}`} bản ghi`}})})]})}var he=["in","onExited","appear","enter","exit"],xe=function(n){return function(t){t.in,t.onExited,t.appear,t.enter,t.exit;var a=j(t,he);return o.createElement(n,a)}},ge=xe,fe=["component","duration","in","onExited"],F=function(n){var t=n.component,a=n.duration,i=a===void 0?1:a,r=n.in;n.onExited;var m=j(n,fe),c=o.useRef(null),p={entering:{opacity:0},entered:{opacity:1,transition:"opacity ".concat(i,"ms")},exiting:{opacity:0},exited:{opacity:0}};return o.createElement(_,{mountOnEnter:!0,unmountOnExit:!0,in:r,timeout:i,nodeRef:c},function(h){var l={style:x({},p[h]),ref:c};return o.createElement(t,b({innerProps:l},m))})},w=260,be=function(n){var t=n.children,a=n.in,i=n.onExited,r=o.useRef(null),m=o.useState("auto"),c=V(m,2),p=c[0],h=c[1];o.useEffect(function(){var d=r.current;if(d){var u=window.requestAnimationFrame(function(){return h(d.getBoundingClientRect().width)});return function(){return window.cancelAnimationFrame(u)}}},[]);var l=function(u){switch(u){default:return{width:p};case"exiting":return{width:0,transition:"width ".concat(w,"ms ease-out")};case"exited":return{width:0}}};return o.createElement(_,{enter:!1,mountOnEnter:!0,unmountOnExit:!0,in:a,onExited:function(){var u=r.current;u&&(i==null||i(u))},timeout:w,nodeRef:r},function(d){return o.createElement("div",{ref:r,style:x({overflow:"hidden",whiteSpace:"nowrap"},l(d))},t)})},ve=["in","onExited"],je=function(n){return function(t){var a=t.in,i=t.onExited,r=j(t,ve);return o.createElement(be,{in:a,onExited:i},o.createElement(n,b({cropWithEllipsis:a},r)))}},ye=je,Pe=function(n){return function(t){return o.createElement(F,b({component:n,duration:t.isMulti?w:1},t))}},Se=Pe,Ce=function(n){return function(t){return o.createElement(F,b({component:n},t))}},Ee=Ce,Ve=["component"],we=["children"],Te=function(n){return function(t){return t.isMulti?o.createElement(ke,b({component:n},t)):o.createElement(B,b({component:n},t))}},ke=function(n){var t=n.component,a=j(n,Ve),i=Ne(a);return o.createElement(B,b({component:t},i))},Ne=function(n){var t=n.children,a=j(n,we),i=a.isMulti,r=a.hasValue,m=a.innerProps,c=a.selectProps,p=c.components,h=c.controlShouldRenderValue,l=o.useState(i&&h&&r),d=V(l,2),u=d[0],g=d[1],v=o.useState(!1),T=V(v,2),k=T[0],N=T[1];o.useEffect(function(){r&&!u&&g(!0)},[r,u]),o.useEffect(function(){k&&!r&&u&&g(!1),N(!1)},[k,r,u]);var z=function(){return N(!0)},L=function(y){if(i&&o.isValidElement(y)){if(y.type===p.MultiValue)return o.cloneElement(y,{onExited:z});if(y.type===p.Placeholder&&u)return null}return y},q=x(x({},m),{},{style:x(x({},m==null?void 0:m.style),{},{display:i&&r||u?"flex":"grid"})}),H=x(x({},a),{},{innerProps:q,children:o.Children.toArray(t).map(L)});return H},Ae=Te,Me=["Input","MultiValue","Placeholder","SingleValue","ValueContainer"],D=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=ue({components:n}),a=t.Input,i=t.MultiValue,r=t.Placeholder,m=t.SingleValue,c=t.ValueContainer,p=j(t,Me);return x({Input:ge(a),MultiValue:ye(i),Placeholder:Se(r),SingleValue:Ee(m),ValueContainer:Ae(c)},p)},P=D();P.Input;P.MultiValue;P.Placeholder;P.SingleValue;P.ValueContainer;var Re=le(D);Re();G.forwardRef(function(n,t){return e.jsx(Slide,{direction:"up",ref:t,...n})});const Ye=()=>{K();const[s,n]=o.useState([]);Q();const[t,a]=J(),{register:i,handleSubmit:r,control:m,resetField:c,watch:p,formState:{errors:h}}=X({defaultValues:{tentaikhoan:"",tungay:"",denngay:"",action:""}});let l=U(u=>u.authReducer.id_user);const d=async u=>{if(p("denngay")===""){alert("Vui lòng chọn khoảng thời gian đến ngày cần xem lịch sử hệ thống");return}let g={...u,id:l};a(!0);try{let v=await de.fetchSystemHistory(g);n(v.data),a(!1),A.success(v.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}catch(v){A.error(v.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),a(!1)}};return e.jsxs("div",{children:[e.jsx("div",{className:"my-2",children:e.jsx("h4",{className:"uppercase font-bold text-blue-800 text-sm md:text-[18px]",children:"Lịch sử truy cập hệ thống phần mềm"})}),e.jsxs("form",{className:"mt-2 px-4 py-4 shadow-xl",onSubmit:r(d),children:[e.jsx("h5",{className:"font-bold",children:"Tìm kiếm lịch sử ghi nhận trên hệ thống"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"flex-col flex md:basis-2/5",children:[e.jsx("label",{className:"text-[14px] font-semibold",children:"Tên tài khoản: "}),e.jsx("input",{...i("tentaikhoan"),type:"text",className:`outline-none my-2 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col flex md:basis-1/5",children:[e.jsx("label",{className:"text-[14px] font-semibold",children:"Từ ngày"}),e.jsx("input",{...i("tungay"),type:"date",className:`outline-none my-2 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col flex md:basis-1/5",children:[e.jsx("label",{className:"text-[14px] font-semibold",children:"Đến ngày "}),e.jsx("input",{...i("denngay"),type:"date",className:`outline-none my-2 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col flex md:basis-1/5",children:[e.jsx("label",{className:"text-[14px] font-semibold",children:"Thao tác hệ thống"}),e.jsx("input",{...i("action"),type:"text",className:`outline-none my-2 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]})]}),e.jsx("div",{className:"text-center",children:e.jsxs(ce,{type:"submit",size:"small",sx:{width:"220px"},variant:"contained",children:[e.jsx(Z,{})," Tìm kiếm"]})})]}),e.jsx("h3",{className:"text-center uppercase my-3 text-lg",children:"Lịch sử thao tác ghi nhận trên hệ thống phần mềm"}),e.jsx("div",{className:"mt-4",children:e.jsx(pe,{list:s})})]})};export{Ye as default};
