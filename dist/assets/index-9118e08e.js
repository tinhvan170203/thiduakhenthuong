import{r as u,j as e,s as V,d as _,c as W,u as A,Q as j,N as I,e as Q}from"./index-371a4e8f.js";import"./index.esm-a80e06b2.js";import{u as R}from"./index.esm-dbde89ce.js";import{d as $}from"./Add-b80d7046.js";import{D as K}from"./DialogDelete-f47675d7.js";import{a as G,d as J}from"./AutoAwesomeMotion-e68ec9ef.js";import{S as U,D as X,a as Y,d as Z,b as ee}from"./Cancel-e1a5b8c1.js";import{I as v,B as E,P as te}from"./MenuItem-0a823130.js";import{D as se}from"./DialogActions-8285de49.js";import{B as k}from"./Button-c29e04f7.js";import{c as y}from"./chucvuApi-2a0667ed.js";import{T as D,a as m,P,b as ae,c as re,d as le,e as oe,f as ne,g as T,h as w,i as O,j as B}from"./LastPage-410e0def.js";import{d as ie}from"./Edit-3f190fda.js";import"./createSvgIcon-b5eb2c40.js";import"./ButtonBase-3ca56fd5.js";const ce=u.forwardRef(function(r,o){return e.jsx(U,{direction:"up",ref:o,...r})}),de=V(v)({position:"absolute",right:"16px",top:"4px"});function ue({open:l,item:r,onCloseDialogEdit:o,onSubmit:s}){const{register:c,handleSubmit:t,control:d,resetField:x,setValue:f,watch:C,formState:{errors:a}}=R({defaultValues:{chucvu:"",thutu:1}});u.useState([]),u.useEffect(()=>{r&&(f("chucvu",r.chucvu,{shouldValidate:!0}),f("thutu",r.thutu,{shouldValidate:!0}))},[r]);const i=async b=>{if(s){const h={...b,id_edit:r._id};await s(h),o()}};return e.jsx(e.Fragment,{children:e.jsxs(X,{maxWidth:"lg",fullWidth:!0,disableEscapeKeyDown:!0,onClose:(b,h)=>{h!=="backdropClick"&&o(b,h)},open:l,TransitionComponent:ce,keepMounted:!0,"aria-describedby":"alert-dialog-slide-description",children:[e.jsxs(Y,{style:{display:"flex",borderBottom:"1px solid #ccc",backgroundColor:"#03528f",margin:"0px"},children:[e.jsx(G,{style:{color:"white",fontSize:"24px",marginRight:"8px"}}),e.jsx("span",{className:"text-white text-[18px]",children:"Chỉnh sửa chức vụ công tác"}),e.jsx(de,{onClick:()=>o(),children:e.jsx(Z,{style:{color:"white"}})})]}),e.jsx(ee,{children:e.jsx(E,{children:e.jsxs("form",{className:"mt-2 mx-8",onSubmit:t(i),children:[e.jsxs("div",{className:"flex-col flex",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Chức vụ: "]}),e.jsx("input",{...c("chucvu",{required:!0}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs("div",{className:"flex-col flex",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Thứ tự xuất hiện: "]}),e.jsx("input",{...c("thutu",{required:!0}),type:"number",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]})}),e.jsx(se,{children:e.jsxs(k,{color:"primary",variant:"contained",type:"submit",style:{margin:"4px auto"},children:[e.jsx($,{}),e.jsx("span",{children:"Cập nhật"})]})})]})})})]})})}const he=({row:l,page:r,rowsPerPage:o,index:s,onClickOpenDialogEdit:c,onClickOpenDialogDelete:t})=>(u.useState(null),_(d=>d.authReducer.roles_theodoithidua),e.jsxs(D,{className:"hover:bg-slate-200 transition duration-300",children:[e.jsx(m,{className:"border-r border-slate-300",align:"left",style:{fontWeight:"bold"},children:r*o+s}),e.jsx(m,{className:"border-r border-slate-300",align:"left",children:l.chucvu}),e.jsx(m,{className:"border-r border-slate-300",align:"left",children:l.thutu}),e.jsxs(m,{align:"right",className:"bg-gray-300 flex justify-center items-center space-x-1 hover:bg-slate-500 transition duration-300",style:{width:"180px"},children:[e.jsx(k,{variant:"contained",color:"info",size:"small",onClick:()=>c(l),children:e.jsx(ie,{style:{fontSize:"20px"}})}),e.jsx(k,{variant:"contained",color:"error",size:"small",style:{marginLeft:"4px"},onClick:()=>t(l._id),children:e.jsx(J,{style:{fontSize:"20px"}})})]})]},l._id));function z(l){const r=W(),{count:o,page:s,rowsPerPage:c,onPageChange:t}=l,d=a=>{t(a,0)},x=a=>{t(a,s-1)},f=a=>{t(a,s+1)},C=a=>{t(a,Math.max(0,Math.ceil(o/c)-1))};return e.jsxs(E,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(v,{onClick:d,disabled:s===0,"aria-label":"first page",children:r.direction==="rtl"?e.jsx(T,{}):e.jsx(w,{})}),e.jsx(v,{onClick:x,disabled:s===0,"aria-label":"previous page",children:r.direction==="rtl"?e.jsx(O,{}):e.jsx(B,{})}),e.jsx(v,{onClick:f,disabled:s>=Math.ceil(o/c)-1,"aria-label":"next page",children:r.direction==="rtl"?e.jsx(B,{}):e.jsx(O,{})}),e.jsx(v,{onClick:C,disabled:s>=Math.ceil(o/c)-1,"aria-label":"last page",children:r.direction==="rtl"?e.jsx(w,{}):e.jsx(T,{})})]})}z.propTypes={count:P.number.isRequired,onPageChange:P.func.isRequired,page:P.number.isRequired,rowsPerPage:P.number.isRequired};function ge({list:l,onClickOpenDialogEdit:r,onClickOpenDialogDelete:o}){const[s,c]=u.useState(0),[t,d]=u.useState(10),x=s>0?Math.max(0,(1+s)*t-l.length):0,f=(a,i)=>{c(i)},C=a=>{d(parseInt(a.target.value,10)),c(0)};return e.jsxs(e.Fragment,{children:[e.jsx(ae,{component:te,children:e.jsxs(re,{"aria-label":"custom pagination table",children:[e.jsx(le,{children:e.jsxs(D,{children:[e.jsx(m,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(143 1 1)"},children:"#"}),e.jsx(m,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(143 1 1)"},children:"Chức vụ"}),e.jsx(m,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(143 1 1)"},children:"Thứ tự"}),e.jsx(m,{align:"center",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(143 1 1)",maxWidth:"150px"},children:"Thao tác"})]})}),e.jsxs(oe,{children:[(t>0?l.slice(s*t,s*t+t):l).map((a,i)=>e.jsx(he,{row:a,page:s,rowsPerPage:t,index:i+1,onClickOpenDialogEdit:r,onClickOpenDialogDelete:o},a._id)),x>0&&e.jsx(D,{style:{height:53*x},children:e.jsx(m,{colSpan:6})})]})]})}),e.jsx("div",{children:e.jsx(ne,{rowsPerPageOptions:[10,25,50,100,{label:"Tất cả",value:-1}],count:l.length,rowsPerPage:t,page:s,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},component:"div",onPageChange:f,onRowsPerPageChange:C,ActionsComponent:z,labelRowsPerPage:"Số bản ghi hiển thị trên mỗi trang",labelDisplayedRows:function({from:i,to:b,count:h}){return`hiển thị ${i} đến ${b} bản ghi trong tổng số ${h!==-1?h:`more than ${b}`} bản ghi`}})})]})}const _e=()=>{let l=_(n=>n.authReducer.vaitro_theodoithidua);const r=A();if(l!=="Quản trị hệ thống")return j.error("Tài khoản không có truy cập trang này",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!1,draggable:!1,progress:void 0,theme:"light"}),e.jsx(I,{to:"/login",replace:!0});const[o,s]=u.useState([]),[c,t]=Q(),[d,x]=u.useState({status:!1,item:null}),f=()=>{x({...d,status:!1})},C=n=>{x({item:n,status:!0})},[a,i]=u.useState({status:!1,id_Delete:null}),b=n=>{i({status:!0,id_Delete:n})},h=()=>{i({...a,status:!1})},H=()=>{i({...a,status:!1})},{register:N,handleSubmit:q,control:pe,resetField:S,watch:me,formState:{errors:xe}}=R({defaultValues:{chucvu:"",thutu:1}});u.useEffect(()=>{(async()=>{t(!0);try{let g=await y.getChucvus();s(g.data),setTimeout(()=>{t(!1)},400)}catch(g){g.message==="Token không hợp lệ hoặc đã hết hạn. Vui lòng đăng nhập lại"&&(r("/login"),t(!1),j.error(g.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})),console.log(g.message)}})()},[]);const F=async n=>{let g={...n};t(!0);try{let p=await y.addChucvu(g);s(p.data.chucvuList),setTimeout(()=>{t(!1)},400),S("chucvu"),S("thutu"),j.success(p.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}catch(p){j.error(p.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),t(!1)}},L=async n=>{let g={...n};t(!0);try{let p=await y.editChucvu(g);s(p.data.chucvuList),setTimeout(()=>{t(!1)},400),j.success(p.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}catch(p){j.error(p.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),t(!1)}},M=async()=>{t(!0);try{let n=await y.deleteChucvu(a.id_Delete);s(n.data.chucvuList),setTimeout(()=>{t(!1)},400),i({...a,status:!1}),j.success(n.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}catch(n){i({...a,status:!1}),j.error(n.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),t(!1)}};return e.jsxs("div",{className:"pr-2","data-aos":"fade-left","data-aos-once":"true",children:[e.jsx("div",{className:"my-2",children:e.jsx("h4",{className:"uppercase font-bold text-blue-800 text-sm md:text-[18px]",children:"Cấu hình chức vụ công tác"})}),e.jsxs("form",{className:"mt-2 px-6 py-4 shadow-gray-400 shadow-md",onSubmit:q(F),children:[e.jsxs("div",{className:"flex-col flex",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Chức vụ: "]}),e.jsx("input",{...N("chucvu",{required:!0}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:border-blue-500 focus:border-2`})]}),e.jsxs("div",{className:"flex-col flex md:basis-1/2",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Thứ tự: "]}),e.jsx("input",{...N("thutu",{required:!0}),type:"number",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:border-blue-500 focus:border-2`})]}),e.jsx("div",{className:"md:space-x-2 space-y-2 md:space-y-0 md:block flex flex-col items-center",children:e.jsxs(k,{type:"submit",color:"primary",variant:"contained",children:[e.jsx($,{})," Thêm mới"]})})]}),e.jsx("div",{className:"mt-6 px-2 shadow-black shadow-sm",children:e.jsx(ge,{list:o,onClickOpenDialogDelete:b,onClickOpenDialogEdit:C})}),e.jsx(ue,{open:d.status,item:d.item,onCloseDialogEdit:f,onSubmit:L}),e.jsx(K,{open:a.status,onCloseDialogDelete:H,onConfirmDelete:M,onCancelDelete:h})]})};export{_e as default};
