import{I as z,r as x,d as V,j as e,c as ee,s as se,e as $e,h as Me,u as He,Q as k}from"./index-469ebc4a.js";import{d as K}from"./Search-9d8f7eda.js";import"./index.esm-a80e06b2.js";import{u as E,C as F}from"./index.esm-e24acc70.js";import{d as L}from"./Add-c692c54c.js";import{q as We}from"./base-e8aaf39e.js";import{S as $}from"./react-select.esm-ea0f231f.js";import{D as Ye}from"./DialogDelete-28d67f98.js";import"./DialogEditKhentapthe-266c6406.js";import{C as Qe,d as Ae}from"./FileDownload-8fac1ea7.js";import{c as Z}from"./canboApi-a16ae5b6.js";import"./TableDoanvien-e2900fcb.js";import{T as _,a as n,P as D,b as le,c as ae,d as ne,e as te,f as re,g as M,h as H,i as W,j as Y}from"./LastPage-511a91a0.js";import{d as oe}from"./Edit-1cb268c9.js";import{d as Ve,a as ie}from"./AutoAwesomeMotion-01db5c5f.js";import{d as w}from"./dayjs.min-e05fe7c1.js";import{B as v}from"./Button-e3d685a6.js";import{P as de,B as Q,I as N}from"./MenuItem-22e0308b.js";import{S as ce,D as ue,a as he,d as xe,b as ge}from"./Cancel-be6c3443.js";import{D as me}from"./DialogActions-425572d2.js";import"./createSvgIcon-e7baeffd.js";import"./ButtonBase-ea83d2d9.js";import"./memoize-one.esm-c82963f8.js";import"./Link-3fd13359.js";const T={getKiluatcanhans(s){const a=`/ki-luat/ca-nhan/${s}/fetch`;return z.get(a)},addKiluatcanhan(s){const a="/ki-luat/ca-nhan/add";return z.post(a,s)},editKiluatcanhan(s){const a=`/ki-luat/ca-nhan/edit/${s.id_edit}`;return z.put(a,s)},deleteKiluatcanhan(s){const a=`/ki-luat/ca-nhan/delete/${s}`;return z.delete(a)},searchKiluatcanhans(s,a){const t=`/ki-luat/ca-nhan/${s}/search`;return z.get(t,{params:a})}},Ee=({row:s,page:a,rowsPerPage:t,index:o,onClickOpenDialogEdit:l,onClickOpenDialogDelete:c})=>(x.useState(null),V(f=>f.authReducer.roles_quanlydoanvien),e.jsxs(_,{className:"hover:bg-slate-200 transition duration-300",children:[e.jsx(n,{className:"border-r border-slate-300",align:"left",style:{fontWeight:"bold"},children:a*t+o}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:e.jsx("span",{className:"font-bold",children:s.soQD})}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:s.hinhthuc}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:s.nguoiky}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:w(s.ngayky).format("DD/MM/YYYY")}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:s.noidung}),e.jsxs(n,{align:"right",className:"bg-gray-300 flex justify-center items-center space-x-1 hover:bg-slate-500 transition duration-300",style:{width:"180px"},children:[e.jsx(v,{variant:"contained",color:"info",size:"small",onClick:()=>l(s),children:e.jsx(oe,{style:{fontSize:"20px"}})}),e.jsx(v,{variant:"contained",color:"error",size:"small",style:{marginLeft:"4px"},onClick:()=>c(s._id),children:e.jsx(Ve,{style:{fontSize:"20px"}})})]})]},s._id));function fe(s){const a=ee(),{count:t,page:o,rowsPerPage:l,onPageChange:c}=s,f=d=>{c(d,0)},j=d=>{c(d,o-1)},m=d=>{c(d,o+1)},p=d=>{c(d,Math.max(0,Math.ceil(t/l)-1))};return e.jsxs(Q,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(N,{onClick:f,disabled:o===0,"aria-label":"first page",children:a.direction==="rtl"?e.jsx(M,{}):e.jsx(H,{})}),e.jsx(N,{onClick:j,disabled:o===0,"aria-label":"previous page",children:a.direction==="rtl"?e.jsx(W,{}):e.jsx(Y,{})}),e.jsx(N,{onClick:m,disabled:o>=Math.ceil(t/l)-1,"aria-label":"next page",children:a.direction==="rtl"?e.jsx(Y,{}):e.jsx(W,{})}),e.jsx(N,{onClick:p,disabled:o>=Math.ceil(t/l)-1,"aria-label":"last page",children:a.direction==="rtl"?e.jsx(H,{}):e.jsx(M,{})})]})}fe.propTypes={count:D.number.isRequired,onPageChange:D.func.isRequired,page:D.number.isRequired,rowsPerPage:D.number.isRequired};function Fe({list:s,onClickOpenDialogEdit:a,onClickOpenDialogDelete:t}){const[o,l]=x.useState(0),[c,f]=x.useState(10),j=o>0?Math.max(0,(1+o)*c-s.length):0,m=(d,i)=>{l(i)},p=d=>{f(parseInt(d.target.value,10)),l(0)};return e.jsxs(e.Fragment,{children:[e.jsx(le,{component:de,children:e.jsxs(ae,{"aria-label":"custom pagination table",children:[e.jsx(ne,{children:e.jsxs(_,{children:[e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(143 1 1)"},children:"#"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(143 1 1)"},children:"Số quyết định"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(143 1 1)"},children:"Hình thức"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(143 1 1)"},children:"Người ký"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(143 1 1)"},children:"Ngày ký"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"200px",backgroundColor:"rgb(143 1 1)"},children:"Nội dung kỉ luật"}),e.jsx(n,{align:"center",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(143 1 1)",maxWidth:"150px"},children:"Thao tác"})]})}),e.jsxs(te,{children:[(c>0?s.slice(o*c,o*c+c):s).map((d,i)=>e.jsx(Ee,{row:d,page:o,rowsPerPage:c,index:i+1,onClickOpenDialogEdit:a,onClickOpenDialogDelete:t},d._id)),j>0&&e.jsx(_,{style:{height:53*j},children:e.jsx(n,{colSpan:6})})]})]})}),e.jsx("div",{children:e.jsx(re,{rowsPerPageOptions:[10,25,50,100,{label:"Tất cả",value:-1}],count:s.length,rowsPerPage:c,page:o,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},component:"div",onPageChange:m,onRowsPerPageChange:p,ActionsComponent:fe,labelRowsPerPage:"Số bản ghi hiển thị trên mỗi trang",labelDisplayedRows:function({from:i,to:b,count:C}){return`hiển thị ${i} đến ${b} bản ghi trong tổng số ${C!==-1?C:`more than ${b}`} bản ghi`}})})]})}const Le=x.forwardRef(function(a,t){return e.jsx(ce,{direction:"up",ref:t,...a})}),Ie=se(N)({position:"absolute",right:"16px",top:"4px"});function Xe({open:s,onCloseDialogAdd:a,onSubmit:t}){const{register:o,handleSubmit:l,control:c,resetField:f,setValue:j,watch:m,formState:{errors:p}}=E({defaultValues:{}});x.useState([]);const d=async i=>{if(t){const b={...i};await t(b),f("soQD"),f("noidung")}};return e.jsx(e.Fragment,{children:e.jsxs(ue,{maxWidth:"xl",fullWidth:!0,disableEscapeKeyDown:!0,onClose:(i,b)=>{b!=="backdropClick"&&a(i,b)},open:s,TransitionComponent:Le,keepMounted:!0,"aria-describedby":"alert-dialog-slide-description",children:[e.jsxs(he,{style:{display:"flex",borderBottom:"1px solid #ccc",backgroundColor:"#03528f",margin:"0px"},children:[e.jsx(ie,{style:{color:"white",fontSize:"24px",marginRight:"8px"}}),e.jsx("span",{className:"text-white text-[18px]",children:"Thêm mới kỉ luật cá nhân"}),e.jsx(Ie,{onClick:()=>a(),children:e.jsx(xe,{style:{color:"white"}})})]}),e.jsx(ge,{children:e.jsx(Q,{children:e.jsx("form",{className:"mt-2 mx-8",onSubmit:l(d),children:e.jsxs("div",{className:"flex flex-wrap xl:flex-row flex-col flex-1 p-2",children:[e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Số QĐ kỉ luật: "]}),e.jsx("input",{...o("soQD",{required:!0}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:border-blue-500 focus:border-2`})]}),e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Ngày ký: "]}),e.jsx("input",{...o("ngayky",{required:!0}),type:"date",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:border-blue-500 focus:border-2`})]}),e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Người ký: "]}),e.jsx("input",{...o("nguoiky",{required:!0}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:border-blue-500 focus:border-2`})]}),e.jsxs("div",{className:"flex-col md:basis-full flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Nội dung kỉ luật: "]}),e.jsx("input",{...o("noidung",{required:!0}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:border-blue-500 focus:border-2`})]}),e.jsxs("div",{className:"flex-col md:basis-full flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Hình thức kỉ luật: "]}),e.jsx(F,{control:c,name:"hinhthuc",render:({field:i})=>e.jsx($,{options:[{label:"Khiển trách",value:"Khiển trách"},{label:"Cảnh cáo",value:"Cảnh cáo"},{label:"Hạ cấp bậc hàm",value:"Hạ cấp bậc hàm"},{label:"Tước quân tịch CAND",value:"Tước quân tịch CAND"}],className:"basic-multi-select my-4 p-1",classNamePrefix:"select",placeholder:"Vui lòng chọn hình thức",required:!0,...i})})]}),e.jsx(me,{children:e.jsxs(v,{color:"primary",variant:"contained",type:"submit",style:{margin:"4px auto"},children:[e.jsx(L,{}),e.jsx("span",{children:"Thêm mới"})]})})]})})})})]})})}const Ge=x.forwardRef(function(a,t){return e.jsx(ce,{direction:"up",ref:t,...a})}),Je=se(N)({position:"absolute",right:"16px",top:"4px"});function Ue({open:s,onCloseDialogEdit:a,item:t,onSubmit:o}){const{register:l,handleSubmit:c,control:f,resetField:j,setValue:m,watch:p,formState:{errors:d}}=E({defaultValues:{}});x.useState([]);const i=async b=>{if(o){const C={...b,id_edit:t._id};await o(C),a()}};return x.useEffect(()=>{t&&(m("soQD",t.soQD,{shouldValidate:!0}),m("hinhthuc",{label:t.hinhthuc,value:t.hinhthuc},{shouldValidate:!0}),m("noidung",t.noidung,{shouldValidate:!0}),m("ngayky",t.ngayky,{shouldValidate:!0}),m("nguoiky",t.nguoiky,{shouldValidate:!0}))},[t]),e.jsx(e.Fragment,{children:e.jsxs(ue,{maxWidth:"xl",fullWidth:!0,disableEscapeKeyDown:!0,onClose:(b,C)=>{C!=="backdropClick"&&a(b,C)},open:s,TransitionComponent:Ge,keepMounted:!0,"aria-describedby":"alert-dialog-slide-description",children:[e.jsxs(he,{style:{display:"flex",borderBottom:"1px solid #ccc",backgroundColor:"#03528f",margin:"0px"},children:[e.jsx(ie,{style:{color:"white",fontSize:"24px",marginRight:"8px"}}),e.jsx("span",{className:"text-white text-[18px]",children:"Chỉnh sửa kỉ luật đối với cá nhân"}),e.jsx(Je,{onClick:()=>a(),children:e.jsx(xe,{style:{color:"white"}})})]}),e.jsx(ge,{children:e.jsx(Q,{children:e.jsx("form",{className:"mt-2 mx-8",onSubmit:c(i),children:e.jsxs("div",{className:"flex flex-wrap xl:flex-row flex-col flex-1 p-2",children:[e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Số QĐ kỉ luật: "]}),e.jsx("input",{...l("soQD",{required:!0}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:border-blue-500 focus:border-2`})]}),e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Ngày ký: "]}),e.jsx("input",{...l("ngayky",{required:!0}),type:"date",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:border-blue-500 focus:border-2`})]}),e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Người ký: "]}),e.jsx("input",{...l("nguoiky",{required:!0}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:border-blue-500 focus:border-2`})]}),e.jsxs("div",{className:"flex-col md:basis-full flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Nội dung kỉ luật: "]}),e.jsx("input",{...l("noidung",{required:!0}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:border-blue-500 focus:border-2`})]}),e.jsxs("div",{className:"flex-col md:basis-full flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Hình thức kỉ luật: "]}),e.jsx(F,{control:f,name:"hinhthuc",render:({field:b})=>e.jsx($,{options:[{label:"Khiển trách",value:"Khiển trách"},{label:"Cảnh cáo",value:"Cảnh cáo"},{label:"Hạ cấp bậc hàm",value:"Hạ cấp bậc hàm"},{label:"Tước quân tịch CAND",value:"Tước quân tịch CAND"}],className:"basic-multi-select my-4 p-1",classNamePrefix:"select",placeholder:"Vui lòng chọn hình thức",required:!0,...b})})]}),e.jsx(me,{children:e.jsxs(v,{color:"primary",variant:"contained",type:"submit",style:{margin:"4px auto"},children:[e.jsx(L,{}),e.jsx("span",{children:"Lưu dữ liệu"})]})})]})})})})]})})}const Ze=({row:s,onHandleChoiceCanbo:a,page:t,rowsPerPage:o,index:l})=>(x.useState(null),V(c=>c.authReducer.roles_quanlydoanvien),e.jsxs(_,{children:[e.jsx(n,{className:"border-r border-slate-300",align:"left",style:{fontWeight:"bold"},children:t*o+l}),e.jsx(n,{className:"border-r border-slate-300",align:"left",style:{fontWeight:"bold"},children:s.hoten}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:w(s.ngaysinh).format("DD/MM/YYYY")}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:s.bachamPopulate[0].bacham}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:s.chucvuPopulate[0].chucvu}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:e.jsx("p",{className:"truncate font-semibold",children:s.donviPopulate[0].tendoi})}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:s.dangvien===!0?"Đảng viên":""}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:s.gioitinh}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:s.ngayvaodang!==""?w(s.ngayvaodang).format("DD/MM/YYYY"):""}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:w(s.bacham.tungay).format("DD/MM/YYYY")}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:w(s.chucvu.tungay).format("DD/MM/YYYY")}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:w(s.donvi.tungay).format("DD/MM/YYYY")}),e.jsx(n,{className:"border-r border-slate-300",align:"left"}),e.jsx(n,{align:"right",className:"bg-gray-300 flex justify-center items-center space-x-1",style:{position:"absolute",right:"8px",height:"53px",width:"300px",display:"flex",flexDirection:"unset"},children:e.jsxs(v,{variant:"contained",color:"success",size:"small",onClick:()=>a(s),children:[e.jsx(oe,{style:{fontSize:"20px"}}),"Kỉ luật cá nhân"]})})]},s._id));function pe(s){const a=ee(),{count:t,page:o,rowsPerPage:l,onPageChange:c}=s,f=d=>{c(d,0)},j=d=>{c(d,o-1)},m=d=>{c(d,o+1)},p=d=>{c(d,Math.max(0,Math.ceil(t/l)-1))};return e.jsxs(Q,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(N,{onClick:f,disabled:o===0,"aria-label":"first page",children:a.direction==="rtl"?e.jsx(M,{}):e.jsx(H,{})}),e.jsx(N,{onClick:j,disabled:o===0,"aria-label":"previous page",children:a.direction==="rtl"?e.jsx(W,{}):e.jsx(Y,{})}),e.jsx(N,{onClick:m,disabled:o>=Math.ceil(t/l)-1,"aria-label":"next page",children:a.direction==="rtl"?e.jsx(Y,{}):e.jsx(W,{})}),e.jsx(N,{onClick:p,disabled:o>=Math.ceil(t/l)-1,"aria-label":"last page",children:a.direction==="rtl"?e.jsx(H,{}):e.jsx(M,{})})]})}pe.propTypes={count:D.number.isRequired,onPageChange:D.func.isRequired,page:D.number.isRequired,rowsPerPage:D.number.isRequired};function es({list:s,onHandleChoiceCanbo:a}){const[t,o]=x.useState(0),[l,c]=x.useState(10),f=t>0?Math.max(0,(1+t)*l-s.length):0,j=(p,d)=>{o(d)},m=p=>{c(parseInt(p.target.value,10)),o(0)};return e.jsxs(e.Fragment,{children:[e.jsx(le,{component:de,style:{overflowX:"scroll"},children:e.jsxs(ae,{"aria-label":"custom pagination table",children:[e.jsx(ne,{children:e.jsxs(_,{children:[e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(143 1 1)"},children:"#"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(143 1 1)",minWidth:"250px"},children:"Họ tên"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(143 1 1)",minWidth:"120px"},children:"Ngày sinh"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(143 1 1)",minWidth:"120px"},children:"Bậc hàm"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(143 1 1)",minWidth:"300px"},children:"Chức vụ"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(143 1 1)",minWidth:"400px"},children:"Đội, tổ công tác"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(143 1 1)",minWidth:"100px"},children:"Đảng viên"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(143 1 1)",minWidth:"100px"},children:"Giới tính"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(143 1 1)",minWidth:"150px"},children:"Ngày vào đảng"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(143 1 1)",minWidth:"150px"},children:"Ngày lên hàm"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(143 1 1)",minWidth:"150px"},children:"Ngày giữ chức vụ"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(143 1 1)",minWidth:"250px"},children:"Ngày nhận công tác về đơn vị"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",backgroundColor:"rgb(143 1 1)",minWidth:"300px"}}),e.jsx(n,{align:"center",style:{fontSize:"14px",color:"#fff",backgroundColor:"rgb(64, 64, 64)",minWidth:"300px",position:"absolute",right:"8px"},children:"Thao tác"})]})}),e.jsxs(te,{children:[(l>0?s.slice(t*l,t*l+l):s).map((p,d)=>e.jsx(Ze,{row:p,page:t,rowsPerPage:l,index:d+1,onHandleChoiceCanbo:a},p._id)),f>0&&e.jsx(_,{style:{height:53*f},children:e.jsx(n,{colSpan:6})})]})]})}),e.jsx("div",{children:e.jsx(re,{rowsPerPageOptions:[10,25,50,100,{label:"Tất cả",value:-1}],count:s.length,rowsPerPage:l,page:t,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},component:"div",onPageChange:j,onRowsPerPageChange:m,ActionsComponent:pe,labelRowsPerPage:"Số cán bộ hiển thị trên mỗi trang",labelDisplayedRows:function({from:d,to:i,count:b}){return`hiển thị ${d} đến ${i} cán bộ trong tổng số ${b!==-1?b:`more than ${i}`} cán bộ`}})})]})}let ss=[{label:"STT",key:"stt"},{label:"Số quyết định",key:"soQD"},{label:"Hình thức",key:"hinhthuc"},{label:"Người ký",key:"nguoiky"},{label:"Ngày ký",key:"ngayky"},{label:"Nội dung khen",key:"noidung"}];const Ts=()=>{const[s,a]=x.useState([]),[t,o]=x.useState(!1),[l,c]=x.useState(null);let[f,j]=x.useState([]);const[m,p]=x.useState({hoten:"",donvi:""}),[d,i]=$e();let[b,C]=Me();const[O,be]=x.useState([]),[je,ye]=x.useState([]),[I,X]=x.useState({status:!1}),ke=r=>{X({status:!0})},ve=()=>{X({...I,status:!1})},R=He(),S=x.useMemo(()=>{const r=We.parse(location.search);return{...r,hoten:r.hoten||"",donvi:r.donvi||""}},[location.search]),[A,G]=x.useState({status:!1,item:null}),[P,B]=x.useState({status:!1,id_Delete:null}),Ne=r=>{G({item:r,status:!0})},Ce=()=>{G({...A,status:!1})},De=()=>{B({...P,status:!1})},Se=()=>{B({...P,status:!1})},Pe=r=>{B({status:!0,id_Delete:r})},{register:q,handleSubmit:Te,control:we,resetField:ls,setValue:J,watch:U,formState:{errors:as}}=E({defaultValues:{hinhthuc:{label:"Tất cả",value:""}}});x.useEffect(()=>{J("donvi",S.donvi===""?{value:"",label:"Tất cả"}:O.find(r=>r.value===S.donvi))},[O]),x.useEffect(()=>{J("donvi",S.donvi===""?{value:"",label:"Tất cả"}:O.find(u=>u.value===S.donvi)),(async()=>{try{i(!0);let u=await Z.fetchDangvienList(S);ye(u.data),i(!1)}catch(u){u.message==="Token không hợp lệ hoặc đã hết hạn. Vui lòng đăng nhập lại"&&(R("/login"),i(!1),k.error(u.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})),console.log(u.message)}})()},[S]);const _e=async r=>{let u={...r,hinhthuc:r.hinhthuc.value};try{i(!0);let g=await T.searchKiluatcanhans(l._id,u);a(g.data),j(g.data.map((h,y)=>({stt:y+1,soQD:h.soQD,ngayky:h.ngayky,noidung:h.noidung,nguoiky:h.nguoiky,hinhthuc:h.hinhthuc}))),i(!1)}catch(g){g.message==="Token không hợp lệ hoặc đã hết hạn. Vui lòng đăng nhập lại"&&(R("/login"),i(!1),k.error(g.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})),console.log(g.message)}};x.useEffect(()=>{(async()=>{try{let u=await Z.getDataForAddPerson(),g=[{label:"Tất cả",value:""}].concat(u.data.dois.map(h=>({value:h._id,label:h.tendoi})));be(g)}catch(u){u.message==="Token không hợp lệ hoặc đã hết hạn. Vui lòng đăng nhập lại"&&(R("/login"),k.error(u.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})),console.log(u.message)}})()},[]),x.useEffect(()=>{l&&(async()=>{try{i(!0);let u=await T.getKiluatcanhans(l._id);a(u.data),j(u.data.map((g,h)=>({stt:h+1,soQD:g.soQD,ngayky:g.ngayky,noidung:g.noidung,nguoiky:g.nguoiky,hinhthuc:g.hinhthuc}))),i(!1)}catch(u){u.message==="Token không hợp lệ hoặc đã hết hạn. Vui lòng đăng nhập lại"&&(R("/login"),i(!1),k.error(u.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})),console.log(u.message)}})()},[l]);const Be=r=>{r.preventDefault(),C({...S,hoten:m.hoten,donvi:m.donvi})},qe=r=>{c(r)},ze=async r=>{let u={...r,id:l._id};i(!0);try{let g=await T.addKiluatcanhan(u),h=await T.getKiluatcanhans(l._id);a(h.data),j(h.data.map((y,Ke)=>({stt:Ke+1,soQD:y.soQD,ngayky:y.ngayky,noidung:y.noidung,hinhthuc:y.hinhthuc,nguoiky:y.nguoiky}))),i(!1),k.success(g.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}catch(g){k.error(g.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),i(!1)}},Oe=async()=>{i(!0);try{let r=await T.deleteKiluatcanhan(P.id_Delete),g=[...s].filter(h=>h._id.toString()!==P.id_Delete);a(g),j(g.map((h,y)=>({stt:y+1,soQD:h.soQD,ngayky:h.ngayky,nguoiky:h.nguoiky,noidung:h.noidung,hinhthuc:h.hinhthuc}))),i(!1),B({...P,status:!1}),k.success(r.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}catch(r){B({...P,status:!1}),k.error(r.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),i(!1)}},Re=async r=>{i(!0);try{let u=await T.editKiluatcanhan(r),g=await T.getKiluatcanhans(l._id);a(g.data),j(arr.map((h,y)=>({stt:y+1,soQD:h.soQD,ngayky:h.ngayky,noidung:h.noidung,hinhthuc:h.hinhthuc,nguoiky:h.nguoiky}))),i(!1),k.success(u.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}catch(u){k.error(u.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),i(!1)}};return V(r=>r.authReducer.roles_theodoithidua),e.jsxs("div",{className:"pr-2","data-aos":"fade-left","data-aos-once":"true",children:[e.jsx("div",{className:"my-2",children:e.jsx("h4",{className:"uppercase font-bold text-blue-800 text-sm md:text-[18px]",children:"Quản lý kết quả kỉ luật đối với cá nhân trong đơn vị"})}),e.jsxs("form",{onSubmit:r=>Be(r),className:"my-2 mt-4 p-4 rounded-lg shadow-md shadow-gray-500",children:[e.jsxs("div",{className:"flex mb-4",children:[e.jsx(K,{}),e.jsx("h3",{className:"font-semibold",children:"Tìm kiếm cán bộ, chiến sĩ"})]}),e.jsxs("div",{className:"flex flex-wrap xl:flex-row flex-col flex-1 py-2 rounded-md",children:[e.jsxs("div",{className:"flex-col flex md:basis-1/3 flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Họ và tên: "}),e.jsx("input",{onChange:r=>p({...m,hoten:r.target.value}),type:"text",className:`outline-none my-4 border rounded-md px-2 py-[6px] border-neutral-300\r
                  focus:border-blue-500 focus:border-2`})]}),e.jsxs("div",{className:"flex-col flex flex-1 md:basis-1/3 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Đơn vị công tác:"}),e.jsx($,{options:O,className:"basic-multi-select my-4",classNamePrefix:"select",placeholder:"Tất cả",onChange:r=>p({...m,donvi:r.value})})]})]}),e.jsx("div",{className:"my-2 text-center",children:e.jsxs(v,{type:"submit",color:"info",variant:"contained",children:[e.jsx(K,{})," Tìm kiếm dữ liệu"]})})]}),e.jsx("div",{className:"mt-6 mx-0 shadow-md shadow-gray-500 rounded-md",children:e.jsx(es,{list:je,onHandleChoiceCanbo:qe})}),l&&e.jsx("div",{}),e.jsxs("div",{className:"shadow-md shadow-gray-500 rounded-md pb-4",children:[l&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-8 text-end md:space-x-2 space-y-2 md:space-y-0 md:block flex flex-col items-center",children:[e.jsxs(v,{type:"submit",onClick:()=>ke(),color:"primary",variant:"contained",children:[e.jsx(L,{})," Thêm mới kỉ luật"]}),e.jsxs(v,{onClick:()=>o(!0),color:"info",variant:"contained",children:[e.jsx(K,{})," Chức năng tìm kiếm"]}),e.jsx(v,{variant:"contained",color:"success",children:e.jsxs(Qe,{data:f,headers:ss,filename:`danhsachkiluat_${l==null?void 0:l.hoten}_${U("tungay")}_${U("denngay")}`,children:[e.jsx(Ae,{style:{color:"fff",fontSize:"16px"}}),e.jsx("span",{className:"ml-1 text-sm text-white",children:"Xuất file excel"})]})})]}),t&&e.jsxs("form",{onSubmit:Te(_e),className:"my-2 mt-4 shadow-gray-400 shadow-md p-4 rounded-lg","data-aos":"zoom-in-down","data-aos-once":"true",children:[e.jsx("div",{className:"flex justify-between",children:e.jsx("h5",{className:"text-[18px] font-semibold",children:"Tìm kiếm kỉ luật cá nhân"})}),e.jsxs("div",{className:"flex flex-wrap xl:flex-row flex-col flex-1 p-2",children:[e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Số QĐ kỉ luật: "}),e.jsx("input",{...q("soQD"),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                    focus:border-blue-500 focus:border-2`})]}),e.jsxs("div",{className:"flex-col md:basis-1/6 flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Từ ngày: "}),e.jsx("input",{...q("tungay"),type:"date",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:border-blue-500 focus:border-2`})]}),e.jsxs("div",{className:"flex-col md:basis-1/6 flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Đến ngày: "}),e.jsx("input",{...q("denngay"),type:"date",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:border-blue-500 focus:border-2`})]}),e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Người ký: "}),e.jsx("input",{...q("nguoiky"),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:border-blue-500 focus:border-2`})]}),e.jsxs("div",{className:"flex-col md:basis-full flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Nội dung và ghi chú: "}),e.jsx("input",{...q("noidung"),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:border-blue-500 focus:border-2`})]}),e.jsxs("div",{className:"flex-col md:basis-1/2 flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Hình thức kỉ luật: "}),e.jsx(F,{control:we,name:"hinhthuc",render:({field:r})=>e.jsx($,{options:[{label:"Tất cả",value:""},{label:"Khiển trách",value:"Khiển trách"},{label:"Cảnh cáo",value:"Cảnh cáo"},{label:"Hạ cấp bậc hàm",value:"Hạ cấp bậc hàm"},{label:"Tước quân tịch CAND",value:"Tước quân tịch CAND"}],className:"basic-multi-select my-4 p-1",classNamePrefix:"select",placeholder:"Vui lòng chọn hình thức kỉ luật",...r})})]})]}),e.jsx("div",{className:"my-2 text-center",children:e.jsxs(v,{type:"submit",color:"primary",variant:"contained",children:[e.jsx(K,{})," Tìm kiếm dữ liệu"]})})]})]}),l&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("h3",{className:"text-center text-blue-600 my-8 text-xl",children:["Danh sách kỉ luật cá nhân của đồng chí ",l==null?void 0:l.bachamPopulate[0].bacham," ",l==null?void 0:l.hoten]}),e.jsx("div",{className:"mb-4 pl-4",children:e.jsxs("span",{className:"font-semibold",children:["Tổng số: ",e.jsx("span",{className:"text-2xl text-red-600 font-semibold",children:s.length})," lượt bị kỉ luật đối với cá nhân"]})}),e.jsx(Fe,{list:s,onClickOpenDialogDelete:Pe,onClickOpenDialogEdit:Ne})]})]}),e.jsx(Xe,{open:I.status,onSubmit:ze,onCloseDialogAdd:ve}),e.jsx(Ue,{open:A.status,item:A.item,onSubmit:Re,onCloseDialogEdit:Ce}),e.jsx(Ye,{open:P.status,onCloseDialogDelete:Se,onConfirmDelete:Oe,onCancelDelete:De})]})};export{Ts as default};
