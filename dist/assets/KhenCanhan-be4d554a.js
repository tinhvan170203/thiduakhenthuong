import{r as o,d as z,j as e,c as Qe,s as ne,e as Ve,h as He,u as Re,Q as k}from"./index-469ebc4a.js";import{d as V}from"./Search-9d8f7eda.js";import"./index.esm-a80e06b2.js";import{u as K,C as O}from"./index.esm-e24acc70.js";import{d as L}from"./Add-c692c54c.js";import{q as $e}from"./base-e8aaf39e.js";import{k as S}from"./khenthuongApi-138ca953.js";import{S as P}from"./react-select.esm-ea0f231f.js";import{D as Ee}from"./DialogDelete-28d67f98.js";import"./DialogEditKhentapthe-266c6406.js";import{C as ze,d as Ke}from"./FileDownload-8fac1ea7.js";import{c as U}from"./canboApi-a16ae5b6.js";import{T as Le}from"./TableDoanvien-e2900fcb.js";import{T as E,a as f,P as H,b as Ae,c as Fe,d as Me,e as We,f as Ie,g as Z,h as ee,i as se,j as ae}from"./LastPage-511a91a0.js";import{d as Ye}from"./Edit-1cb268c9.js";import{d as Xe,a as le}from"./AutoAwesomeMotion-01db5c5f.js";import{d as Ge}from"./dayjs.min-e05fe7c1.js";import{B as N}from"./Button-e3d685a6.js";import{P as Je,B as A,I as _}from"./MenuItem-22e0308b.js";import{S as te,D as re,a as oe,d as ie,b as de}from"./Cancel-be6c3443.js";import{D as ce}from"./DialogActions-425572d2.js";import{c as Ue}from"./capkhenthuong-78ae9c46.js";import{h as Ze}from"./hinhthuckhen-8b4277ac.js";import"./createSvgIcon-e7baeffd.js";import"./ButtonBase-ea83d2d9.js";import"./memoize-one.esm-c82963f8.js";import"./Link-3fd13359.js";const es=({row:i,page:c,rowsPerPage:r,index:m,onClickOpenDialogEdit:a,onClickOpenDialogDelete:u})=>(o.useState(null),z(b=>b.authReducer.roles_quanlydoanvien),e.jsxs(E,{className:"hover:bg-slate-200 transition duration-300",children:[e.jsx(f,{className:"border-r border-slate-300",align:"left",style:{fontWeight:"bold"},children:c*r+m}),e.jsx(f,{className:"border-r border-slate-300",align:"left",children:e.jsx("span",{className:"font-bold",children:i.soQD})}),e.jsx(f,{className:"border-r border-slate-300",align:"left",children:i.hinhthuc.hinhthuckhen}),e.jsx(f,{className:"border-r border-slate-300",align:"left",children:i.capkhen.capkhen}),e.jsx(f,{className:"border-r border-slate-300",align:"left",children:i.nguoiky}),e.jsx(f,{className:"border-r border-slate-300",align:"left",children:Ge(i.ngayky).format("DD/MM/YYYY")}),e.jsx(f,{className:"border-r border-slate-300",align:"left",children:i.noidung}),e.jsxs(f,{align:"right",className:"bg-gray-300 flex justify-center items-center space-x-1 hover:bg-slate-500 transition duration-300",children:[e.jsx(N,{variant:"contained",color:"info",size:"small",onClick:()=>a(i),children:e.jsx(Ye,{style:{fontSize:"20px"}})}),e.jsx(N,{variant:"contained",color:"error",size:"small",style:{marginLeft:"4px"},onClick:()=>u(i._id),children:e.jsx(Xe,{style:{fontSize:"20px"}})})]})]},i._id));function he(i){const c=Qe(),{count:r,page:m,rowsPerPage:a,onPageChange:u}=i,b=h=>{u(h,0)},g=h=>{u(h,m-1)},j=h=>{u(h,m+1)},v=h=>{u(h,Math.max(0,Math.ceil(r/a)-1))};return z(h=>h.authReducer.roles_quanlydoanvien),e.jsxs(A,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(_,{onClick:b,disabled:m===0,"aria-label":"first page",children:c.direction==="rtl"?e.jsx(Z,{}):e.jsx(ee,{})}),e.jsx(_,{onClick:g,disabled:m===0,"aria-label":"previous page",children:c.direction==="rtl"?e.jsx(se,{}):e.jsx(ae,{})}),e.jsx(_,{onClick:j,disabled:m>=Math.ceil(r/a)-1,"aria-label":"next page",children:c.direction==="rtl"?e.jsx(ae,{}):e.jsx(se,{})}),e.jsx(_,{onClick:v,disabled:m>=Math.ceil(r/a)-1,"aria-label":"last page",children:c.direction==="rtl"?e.jsx(ee,{}):e.jsx(Z,{})})]})}he.propTypes={count:H.number.isRequired,onPageChange:H.func.isRequired,page:H.number.isRequired,rowsPerPage:H.number.isRequired};function ss({list:i,onClickOpenDialogEdit:c,onClickOpenDialogDelete:r}){const[m,a]=o.useState(0),[u,b]=o.useState(10),g=m>0?Math.max(0,(1+m)*u-i.length):0,j=(h,d)=>{a(d)},v=h=>{b(parseInt(h.target.value,10)),a(0)};return e.jsxs(e.Fragment,{children:[e.jsx(Ae,{component:Je,children:e.jsxs(Fe,{"aria-label":"custom pagination table",children:[e.jsx(Me,{children:e.jsxs(E,{children:[e.jsx(f,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(143 1 1)"},children:"#"}),e.jsx(f,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(143 1 1)"},children:"Số quyết định"}),e.jsx(f,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(143 1 1)"},children:"Hình thức"}),e.jsx(f,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(143 1 1)"},children:"Cấp khen"}),e.jsx(f,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(143 1 1)"},children:"Người ký"}),e.jsx(f,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(143 1 1)"},children:"Ngày ký"}),e.jsx(f,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"200px",backgroundColor:"rgb(143 1 1)"},children:"Nội dung khen"}),e.jsx(f,{align:"center",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(143 1 1)"},children:"Thao tác"})]})}),e.jsxs(We,{children:[(u>0?i.slice(m*u,m*u+u):i).map((h,d)=>e.jsx(es,{row:h,page:m,rowsPerPage:u,index:d+1,onClickOpenDialogEdit:c,onClickOpenDialogDelete:r},h._id)),g>0&&e.jsx(E,{style:{height:53*g},children:e.jsx(f,{colSpan:6})})]})]})}),e.jsx("div",{children:e.jsx(Ie,{rowsPerPageOptions:[10,25,50,100,{label:"Tất cả",value:-1}],count:i.length,rowsPerPage:u,page:m,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},component:"div",onPageChange:j,onRowsPerPageChange:v,ActionsComponent:he,labelRowsPerPage:"Số bản ghi hiển thị trên mỗi trang",labelDisplayedRows:function({from:d,to:w,count:y}){return`hiển thị ${d} đến ${w} bản ghi trong tổng số ${y!==-1?y:`more than ${w}`} bản ghi`}})})]})}const as=o.forwardRef(function(c,r){return e.jsx(te,{direction:"up",ref:r,...c})}),ns=ne(_)({position:"absolute",right:"16px",top:"4px"});function ls({open:i,onCloseDialogAdd:c,onSubmit:r,capkhen:m,hinhthuc:a}){const{register:u,handleSubmit:b,control:g,resetField:j,setValue:v,watch:h,formState:{errors:d}}=K({defaultValues:{}});o.useState([]);const w=async y=>{if(r){const p={...y};await r(p),j("soQD"),j("noidung")}};return e.jsx(e.Fragment,{children:e.jsxs(re,{maxWidth:"xl",fullWidth:!0,disableEscapeKeyDown:!0,onClose:(y,p)=>{p!=="backdropClick"&&c(y,p)},open:i,TransitionComponent:as,keepMounted:!0,"aria-describedby":"alert-dialog-slide-description",children:[e.jsxs(oe,{style:{display:"flex",borderBottom:"1px solid #ccc",backgroundColor:"#03528f",margin:"0px"},children:[e.jsx(le,{style:{color:"white",fontSize:"24px",marginRight:"8px"}}),e.jsx("span",{className:"text-white text-[18px]",children:"Thêm mới khen thưởng cá nhân"}),e.jsx(ns,{onClick:()=>c(),children:e.jsx(ie,{style:{color:"white"}})})]}),e.jsx(de,{children:e.jsx(A,{children:e.jsx("form",{className:"mt-2 mx-8",onSubmit:b(w),children:e.jsxs("div",{className:"flex flex-wrap xl:flex-row flex-col flex-1 p-2",children:[e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Số QĐ khen thưởng: "]}),e.jsx("input",{...u("soQD",{required:!0}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:border-blue-500 focus:border-2`})]}),e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Ngày ký: "]}),e.jsx("input",{...u("ngayky",{required:!0}),type:"date",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:border-blue-500 focus:border-2`})]}),e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Người ký: "]}),e.jsx("input",{...u("nguoiky",{required:!0}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:border-blue-500 focus:border-2`})]}),e.jsxs("div",{className:"flex-col md:basis-full flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Nội dung khen thưởng: "]}),e.jsx("input",{...u("noidung",{required:!0}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:border-blue-500 focus:border-2`})]}),e.jsxs("div",{className:"flex-col md:basis-1/2 flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Hình thức khen: "]}),e.jsx(O,{control:g,name:"hinhthuc",render:({field:y})=>e.jsx(P,{options:a,className:"basic-multi-select my-4 p-1",classNamePrefix:"select",placeholder:"Vui lòng chọn hình thức",required:!0,...y})})]}),e.jsxs("div",{className:"flex-col md:basis-1/2 flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"}),"Cấp khen: "]}),e.jsx(O,{control:g,name:"capkhen",render:({field:y})=>e.jsx(P,{options:m,className:"basic-multi-select my-4 p-1",classNamePrefix:"select",placeholder:"Vui lòng chọn cấp khen",required:!0,...y})})]}),e.jsx(ce,{children:e.jsxs(N,{color:"primary",variant:"contained",type:"submit",style:{margin:"4px auto"},children:[e.jsx(L,{}),e.jsx("span",{children:"Thêm mới"})]})})]})})})})]})})}const ts=o.forwardRef(function(c,r){return e.jsx(te,{direction:"up",ref:r,...c})}),rs=ne(_)({position:"absolute",right:"16px",top:"4px"});function os({open:i,onCloseDialogEdit:c,item:r,onSubmit:m,capkhen:a,hinhthuc:u}){const{register:b,handleSubmit:g,control:j,resetField:v,setValue:h,watch:d,formState:{errors:w}}=K({defaultValues:{}});o.useState([]);const y=async p=>{if(m){const T={...p,id_edit:r._id};await m(T),c()}};return o.useEffect(()=>{r&&(h("soQD",r.soQD,{shouldValidate:!0}),h("hinhthuc",{label:r.hinhthuc.hinhthuckhen,value:r.hinhthuc._id},{shouldValidate:!0}),h("capkhen",{label:r.capkhen.capkhen,value:r.capkhen._id},{shouldValidate:!0}),h("noidung",r.noidung,{shouldValidate:!0}),h("ngayky",r.ngayky,{shouldValidate:!0}),h("nguoiky",r.nguoiky,{shouldValidate:!0}))},[r]),e.jsx(e.Fragment,{children:e.jsxs(re,{maxWidth:"xl",fullWidth:!0,disableEscapeKeyDown:!0,onClose:(p,T)=>{T!=="backdropClick"&&c(p,T)},open:i,TransitionComponent:ts,keepMounted:!0,"aria-describedby":"alert-dialog-slide-description",children:[e.jsxs(oe,{style:{display:"flex",borderBottom:"1px solid #ccc",backgroundColor:"#03528f",margin:"0px"},children:[e.jsx(le,{style:{color:"white",fontSize:"24px",marginRight:"8px"}}),e.jsx("span",{className:"text-white text-[18px]",children:"Chỉnh sửa khen thưởng đối với cá nhân"}),e.jsx(rs,{onClick:()=>c(),children:e.jsx(ie,{style:{color:"white"}})})]}),e.jsx(de,{children:e.jsx(A,{children:e.jsx("form",{className:"mt-2 mx-8",onSubmit:g(y),children:e.jsxs("div",{className:"flex flex-wrap xl:flex-row flex-col flex-1 p-2",children:[e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Số QĐ khen thưởng: "]}),e.jsx("input",{...b("soQD",{required:!0}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:border-blue-500 focus:border-2`})]}),e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Ngày ký: "]}),e.jsx("input",{...b("ngayky",{required:!0}),type:"date",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:border-blue-500 focus:border-2`})]}),e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Người ký: "]}),e.jsx("input",{...b("nguoiky",{required:!0}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:border-blue-500 focus:border-2`})]}),e.jsxs("div",{className:"flex-col md:basis-full flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Nội dung khen thưởng: "]}),e.jsx("input",{...b("noidung",{required:!0}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:border-blue-500 focus:border-2`})]}),e.jsxs("div",{className:"flex-col md:basis-1/2 flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Hình thức khen: "]}),e.jsx(O,{control:j,name:"hinhthuc",render:({field:p})=>e.jsx(P,{options:u,className:"basic-multi-select my-4 p-1",classNamePrefix:"select",placeholder:"Vui lòng chọn hình thức",required:!0,...p})})]}),e.jsxs("div",{className:"flex-col md:basis-1/2 flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"}),"Cấp khen: "]}),e.jsx(O,{control:j,name:"capkhen",render:({field:p})=>e.jsx(P,{options:a,className:"basic-multi-select my-4 p-1",classNamePrefix:"select",placeholder:"Vui lòng chọn cấp khen",required:!0,...p})})]}),e.jsx(ce,{children:e.jsxs(N,{color:"primary",variant:"contained",type:"submit",style:{margin:"4px auto"},children:[e.jsx(L,{}),e.jsx("span",{children:"Lưu dữ liệu"})]})})]})})})})]})})}let is=[{label:"STT",key:"stt"},{label:"Số quyết định",key:"soQD"},{label:"Hình thức",key:"hinhthuc"},{label:"Cấp khen",key:"capkhen"},{label:"Người ký",key:"nguoiky"},{label:"Ngày ký",key:"ngayky"},{label:"Nội dung khen",key:"noidung"}];const $s=()=>{const[i,c]=o.useState([]),[r,m]=o.useState(!1);o.useState([]);const[a,u]=o.useState(null);let[b,g]=o.useState([]);const[j,v]=o.useState({hoten:"",donvi:""}),[h,d]=Ve();let[w,y]=He();const[p,T]=o.useState([]),[ue,me]=o.useState([]),[F,xe]=o.useState([]),[pe,fe]=o.useState([]),[M,ge]=o.useState([]),[be,je]=o.useState([]),[W,I]=o.useState({status:!1}),ye=s=>{I({status:!0})},ke=()=>{I({...W,status:!1})},Q=Re(),C=o.useMemo(()=>{const s=$e.parse(location.search);return{...s,hoten:s.hoten||"",donvi:s.donvi||""}},[location.search]),[R,Y]=o.useState({status:!1,item:null}),[D,B]=o.useState({status:!1,id_Delete:null}),Ne=s=>{Y({item:s,status:!0})},ve=()=>{Y({...R,status:!1})},Ce=()=>{B({...D,status:!1})},De=()=>{B({...D,status:!1})},Se=s=>{B({status:!0,id_Delete:s})},{register:q,handleSubmit:Pe,control:X,resetField:ds,setValue:G,watch:J,formState:{errors:cs}}=K({defaultValues:{hinhthuc:{label:"Tất cả",value:""},capkhen:{label:"Tất cả",value:""}}});o.useEffect(()=>{G("donvi",C.donvi===""?{value:"",label:"Tất cả"}:p.find(s=>s.value===C.donvi))},[p]),o.useEffect(()=>{G("donvi",C.donvi===""?{value:"",label:"Tất cả"}:p.find(t=>t.value===C.donvi)),(async()=>{try{d(!0);let t=await U.fetchDangvienList(C);me(t.data),d(!1)}catch(t){t.message==="Token không hợp lệ hoặc đã hết hạn. Vui lòng đăng nhập lại"&&(Q("/login"),d(!1),k.error(t.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})),console.log(t.message)}})()},[C]);const we=async s=>{let t={...s,capkhen:s.capkhen.value,hinhthuc:s.hinhthuc.value};try{d(!0);let x=await S.searchKhencanhans(a._id,t);c(x.data),g(x.data.map((n,l)=>({stt:l+1,soQD:n.soQD,ngayky:n.ngayky,noidung:n.noidung,nguoiky:n.nguoiky,hinhthuc:n.hinhthuc.hinhthuckhen,capkhen:n.capkhen.capkhen}))),d(!1)}catch(x){x.message==="Token không hợp lệ hoặc đã hết hạn. Vui lòng đăng nhập lại"&&(Q("/login"),d(!1),k.error(x.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})),console.log(x.message)}};o.useEffect(()=>{(async()=>{try{let t=await U.getDataForAddPerson(),x=[{label:"Tất cả",value:""}].concat(t.data.dois.map(n=>({value:n._id,label:n.tendoi})));T(x)}catch(t){t.message==="Token không hợp lệ hoặc đã hết hạn. Vui lòng đăng nhập lại"&&(Q("/login"),k.error(t.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})),console.log(t.message)}})()},[]),o.useEffect(()=>{a&&(async()=>{try{d(!0);let t=await S.getKhencanhans(a._id),x=await Ue.getCapkhenthuongs(),n=await Ze.getHinhthuckhens();xe(x.data.map(l=>({value:l._id,label:l.capkhen}))),fe([{label:"Tất cả",value:""}].concat(x.data.map(l=>({value:l._id,label:l.capkhen})))),ge(n.data.map(l=>({value:l._id,label:l.hinhthuckhen}))),je([{label:"Tất cả",value:""}].concat(n.data.map(l=>({value:l._id,label:l.hinhthuckhen})))),c(t.data),g(t.data.map((l,$)=>({stt:$+1,soQD:l.soQD,ngayky:l.ngayky,noidung:l.noidung,nguoiky:l.nguoiky,hinhthuc:l.hinhthuc.hinhthuckhen,capkhen:l.capkhen.capkhen}))),d(!1)}catch(t){t.message==="Token không hợp lệ hoặc đã hết hạn. Vui lòng đăng nhập lại"&&(Q("/login"),d(!1),k.error(t.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})),console.log(t.message)}})()},[a]);const Te=s=>{s.preventDefault(),y({...C,hoten:j.hoten,donvi:j.donvi})},_e=s=>{u(s)},Oe=async s=>{let t={...s,id:a._id};d(!0);try{let x=await S.addKhencanhan(t),n=await S.getKhencanhans(a._id);c(n.data),g(n.data.map((l,$)=>({stt:$+1,soQD:l.soQD,ngayky:l.ngayky,noidung:l.noidung,hinhthuc:l.hinhthuc,nguoiky:l.nguoiky,capkhen:l.capkhen}))),d(!1),k.success(x.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}catch(x){k.error(x.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),d(!1)}},Be=async()=>{d(!0);try{let s=await S.deleteKhencanhan(D.id_Delete),x=[...i].filter(n=>n._id.toString()!==D.id_Delete);c(x),g(x.map((n,l)=>({stt:l+1,soQD:n.soQD,ngayky:n.ngayky,nguoiky:n.nguoiky,noidung:n.noidung,hinhthuc:n.hinhthuc,capkhen:n.capkhen}))),d(!1),B({...D,status:!1}),k.success(s.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}catch(s){B({...D,status:!1}),k.error(s.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),d(!1)}},qe=async s=>{d(!0);try{let t=await S.editKhencanhan(s),x=await S.getKhencanhans(a._id);c(x.data),g(arr.map((n,l)=>({stt:l+1,soQD:n.soQD,ngayky:n.ngayky,noidung:n.noidung,hinhthuc:n.hinhthuc.hinhthuckhen,nguoiky:n.nguoiky,capkhen:n.capkhen.capkhen}))),d(!1),k.success(t.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}catch(t){k.error(t.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),d(!1)}};return z(s=>s.authReducer.roles_theodoithidua),e.jsxs("div",{className:"pr-2","data-aos":"fade-left","data-aos-once":"true",children:[e.jsx("div",{className:"my-2",children:e.jsx("h4",{className:"uppercase font-bold text-blue-800 text-sm md:text-[18px]",children:"Quản lý khen thưởng đối với cá nhân trong đơn vị"})}),e.jsxs("form",{onSubmit:s=>Te(s),className:"my-2 mt-4 p-4 rounded-lg shadow-md shadow-gray-500",children:[e.jsxs("div",{className:"flex mb-4",children:[e.jsx(V,{}),e.jsx("h3",{className:"font-semibold",children:"Tìm kiếm cán bộ, chiến sĩ"})]}),e.jsxs("div",{className:"flex flex-wrap xl:flex-row flex-col flex-1 py-2 rounded-md",children:[e.jsxs("div",{className:"flex-col flex md:basis-1/3 flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Họ và tên: "}),e.jsx("input",{onChange:s=>v({...j,hoten:s.target.value}),type:"text",className:`outline-none my-4 border rounded-md px-2 py-[6px] border-neutral-300\r
                  focus:border-blue-500 focus:border-2`})]}),e.jsxs("div",{className:"flex-col flex flex-1 md:basis-1/3 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Đơn vị công tác:"}),e.jsx(P,{options:p,className:"basic-multi-select my-4",classNamePrefix:"select",placeholder:"Tất cả",onChange:s=>v({...j,donvi:s.value})})]})]}),e.jsx("div",{className:"my-2 text-center",children:e.jsxs(N,{type:"submit",color:"info",variant:"contained",children:[e.jsx(V,{})," Tìm kiếm dữ liệu"]})})]}),e.jsx("div",{className:"mt-6 mx-0 shadow-md shadow-gray-500 rounded-md",children:e.jsx(Le,{list:ue,onHandleChoiceCanbo:_e})}),e.jsxs("div",{className:"shadow-md shadow-gray-500 rounded-md pb-4",children:[a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-8 text-end md:space-x-2 space-y-2 md:space-y-0 md:block flex flex-col items-center",children:[e.jsxs(N,{type:"submit",onClick:()=>ye(),color:"primary",variant:"contained",children:[e.jsx(L,{})," Thêm mới khen thưởng"]}),e.jsxs(N,{onClick:()=>m(!0),color:"info",variant:"contained",children:[e.jsx(V,{})," Chức năng tìm kiếm"]}),e.jsx(N,{variant:"contained",color:"success",children:e.jsxs(ze,{data:b,headers:is,filename:`danhsachkhenthuong_${a==null?void 0:a.hoten}_${J("tungay")}_${J("denngay")}`,children:[e.jsx(Ke,{style:{color:"fff",fontSize:"16px"}}),e.jsx("span",{className:"ml-1 text-sm text-white",children:"Xuất file excel"})]})})]}),r&&e.jsxs("form",{onSubmit:Pe(we),className:"my-2 mt-4 shadow-gray-400 shadow-md p-4 rounded-lg","data-aos":"zoom-in-down","data-aos-once":"true",children:[e.jsx("div",{className:"flex justify-between",children:e.jsx("h5",{className:"text-[18px] font-semibold",children:"Tìm kiếm khen thưởng cá nhân"})}),e.jsxs("div",{className:"flex flex-wrap xl:flex-row flex-col flex-1 p-2",children:[e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Số QĐ khen thưởng: "}),e.jsx("input",{...q("soQD"),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                    focus:border-blue-500 focus:border-2`})]}),e.jsxs("div",{className:"flex-col md:basis-1/6 flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Từ ngày: "}),e.jsx("input",{...q("tungay"),type:"date",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:border-blue-500 focus:border-2`})]}),e.jsxs("div",{className:"flex-col md:basis-1/6 flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Đến ngày: "}),e.jsx("input",{...q("denngay"),type:"date",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:border-blue-500 focus:border-2`})]}),e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Người ký: "}),e.jsx("input",{...q("nguoiky"),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:border-blue-500 focus:border-2`})]}),e.jsxs("div",{className:"flex-col md:basis-full flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Nội dung khen thưởng: "}),e.jsx("input",{...q("noidung"),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:border-blue-500 focus:border-2`})]}),e.jsxs("div",{className:"flex-col md:basis-1/2 flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Hình thức khen: "}),e.jsx(O,{control:X,name:"hinhthuc",render:({field:s})=>e.jsx(P,{styles:{zIndex:1e4},options:be,className:"basic-multi-select my-4 p-1",classNamePrefix:"select",placeholder:"Vui lòng chọn hình thức",...s})})]}),e.jsxs("div",{className:"flex-col md:basis-1/2 flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Cấp khen: "}),e.jsx(O,{control:X,name:"capkhen",render:({field:s})=>e.jsx(P,{options:pe,className:"basic-multi-select my-4 p-1",classNamePrefix:"select",placeholder:"Vui lòng chọn cấp khen",...s})})]})]}),e.jsx("div",{className:"my-2 text-center",children:e.jsxs(N,{type:"submit",color:"primary",variant:"contained",children:[e.jsx(V,{})," Tìm kiếm dữ liệu"]})})]})]}),a&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("h3",{className:"text-center text-blue-600 my-8 text-xl",children:["Danh sách khen thưởng cá nhân của đồng chí ",a==null?void 0:a.bachamPopulate[0].bacham," ",a==null?void 0:a.hoten]}),e.jsx("div",{className:"mb-4 pl-4",children:e.jsxs("span",{className:"font-semibold",children:["Tổng số: ",e.jsx("span",{className:"text-2xl text-red-600 font-semibold",children:i.length})," lượt khen thưởng đối với cá nhân"]})}),e.jsx(ss,{list:i,onClickOpenDialogDelete:Se,onClickOpenDialogEdit:Ne})]})]}),e.jsx(ls,{open:W.status,onSubmit:Oe,onCloseDialogAdd:ke,capkhen:F,hinhthuc:M}),e.jsx(os,{open:R.status,item:R.item,onSubmit:qe,onCloseDialogEdit:ve,capkhen:F,hinhthuc:M}),e.jsx(Ee,{open:D.status,onCloseDialogDelete:De,onConfirmDelete:Be,onCancelDelete:Ce})]})};export{$s as default};
