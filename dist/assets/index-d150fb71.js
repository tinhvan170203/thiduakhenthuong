import{r as j,j as e,c as O,u as z,Q as f,N as M,e as _}from"./index-371a4e8f.js";import{u as H}from"./index.esm-dbde89ce.js";import{d as Y}from"./Add-b80d7046.js";import{P as m,b as $,c as W,d as F,T as C,a as r,e as q,f as L,g as P,h as k,i as N,j as S}from"./LastPage-410e0def.js";import{d as T}from"./dayjs.min-9420a05b.js";import{P as A,B as E,I as b}from"./MenuItem-0a823130.js";import{B as R}from"./Button-c29e04f7.js";import{c as B}from"./canboApi-98c0e799.js";import"./createSvgIcon-b5eb2c40.js";import"./ButtonBase-3ca56fd5.js";function w(i){const c=O(),{count:s,page:a,rowsPerPage:t,onPageChange:l}=i,p=o=>{l(o,0)},x=o=>{l(o,a-1)},n=o=>{l(o,a+1)},d=o=>{l(o,Math.max(0,Math.ceil(s/t)-1))};return e.jsxs(E,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(b,{onClick:p,disabled:a===0,"aria-label":"first page",children:c.direction==="rtl"?e.jsx(P,{}):e.jsx(k,{})}),e.jsx(b,{onClick:x,disabled:a===0,"aria-label":"previous page",children:c.direction==="rtl"?e.jsx(N,{}):e.jsx(S,{})}),e.jsx(b,{onClick:n,disabled:a>=Math.ceil(s/t)-1,"aria-label":"next page",children:c.direction==="rtl"?e.jsx(S,{}):e.jsx(N,{})}),e.jsx(b,{onClick:d,disabled:a>=Math.ceil(s/t)-1,"aria-label":"last page",children:c.direction==="rtl"?e.jsx(k,{}):e.jsx(P,{})})]})}w.propTypes={count:m.number.isRequired,onPageChange:m.func.isRequired,page:m.number.isRequired,rowsPerPage:m.number.isRequired};function I({list:i,onChangeStatus:c}){const[s,a]=j.useState(0),[t,l]=j.useState(10);s>0&&Math.max(0,(1+s)*t-i.length);const p=(n,d)=>{a(d)},x=n=>{l(parseInt(n.target.value,10)),a(0)};return e.jsxs(e.Fragment,{children:[e.jsx($,{component:A,children:e.jsxs(W,{"aria-label":"custom pagination table",children:[e.jsx(F,{children:e.jsxs(C,{children:[e.jsx(r,{align:"left",rowSpan:2,style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(143 1 1)"},children:"#"}),e.jsx(r,{align:"left",rowSpan:2,style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(143 1 1)"},children:"Họ tên"}),e.jsx(r,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(143 1 1)"},children:"Ngày sinh"}),e.jsx(r,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(143 1 1)"},children:"Đơn vị trước khi chuyển công tác"}),e.jsx(r,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(143 1 1)"},children:"Đơn vị địa phương chuyển công tác đến"}),e.jsx(r,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(143 1 1)"},children:"Ngày chuyển công tác"}),e.jsx(r,{align:"right",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(143 1 1)"},children:"Thao tác"})]})}),e.jsx(q,{children:(t>0?i.slice(s*t,s*t+t):i).map((n,d)=>e.jsxs(C,{className:"hover:bg-slate-200 transition duration-300",children:[e.jsx(r,{className:"border-r border-slate-300",align:"left",style:{fontWeight:"bold"},children:s*t+d+1}),e.jsx(r,{className:"border-r border-slate-300",align:"left",children:e.jsx("span",{className:"font-bold",children:n.hoten})}),e.jsx(r,{className:"border-r border-slate-300",align:"left",children:T(n.ngaysinh).format("DD/MM/YYYY")}),e.jsx(r,{className:"border-r border-slate-300",align:"left",children:e.jsx("p",{className:"truncate",children:n.donvitruockhichuyen})}),e.jsx(r,{className:"border-r border-slate-300",align:"left",children:e.jsx("p",{className:"truncate",children:n.donvidiaphuongkhac.tenkhoi})}),e.jsx(r,{className:"border-r border-slate-300",align:"left",children:T(n.ngaychuyendonvidiaphuongkhac).format("DD/MM/YYYY")}),e.jsx(r,{className:"border-r border-slate-300",align:"right",children:e.jsx(R,{variant:"contained",color:"info",size:"small",onClick:()=>c(n._id),children:"Thay đổi về đơn vị trong công an tỉnh"})})]},n._id))})]})}),e.jsx("div",{children:e.jsx(L,{rowsPerPageOptions:[10,25,50,100,{label:"Tất cả",value:-1}],count:i.length,rowsPerPage:t,page:s,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},component:"div",onPageChange:p,onRowsPerPageChange:x,ActionsComponent:w,labelRowsPerPage:"Số bản ghi hiển thị trên mỗi trang",labelDisplayedRows:function({from:d,to:o,count:v}){return`hiển thị ${d} đến ${o} bản ghi trong tổng số ${v!==-1?v:`more than ${o}`} bản ghi`}})})]})}const ne=()=>{let i=useSelector(u=>u.authReducer.vaitro_theodoithidua);const c=z();if(i!=="Quản trị hệ thống")return f.error("Tài khoản không có truy cập trang này",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!1,draggable:!1,progress:void 0,theme:"light"}),e.jsx(M,{to:"/login",replace:!0});const[s,a]=_(),[t,l]=j.useState([]),{register:p,handleSubmit:x,control:n,resetField:d,setValue:o,watch:v,formState:{errors:Q}}=H({defaultValues:{hoten:""}}),y=async u=>{let h={...u};try{a(!0);let g=await B.getDoanvienNgoaitinh(h);l(g.data),a(!1)}catch(g){g.message==="Token không hợp lệ hoặc đã hết hạn. Vui lòng đăng nhập lại"&&(c("/login"),a(!1),f.error(g.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})),f.error(g.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),a(!1)}};j.useEffect(()=>{y({hoten:""})},[]);const D=async u=>{a(!0);try{await B.backToCongantinh(u);let h=[...t];h=h.filter(g=>g._id.toString()!==u),l(h),a(!1),f.success("Thay đổi trạng thái thành công",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}catch(h){f.error(h.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),a(!1)}};return e.jsxs("div",{className:"pr-2","data-aos":"fade-left","data-aos-once":"true",children:[e.jsx("div",{className:"my-2",children:e.jsx("h4",{className:"uppercase font-bold text-blue-800 text-sm md:text-[18px]",children:"Quản lý cán bộ, chiến sĩ chuyển công tác ngoài công an tỉnh, thành phố"})}),e.jsx("form",{onSubmit:x(y),children:e.jsxs("div",{className:"flex mt-4 px-4 space-x-2 md:flex-row justify-end items-start",children:[e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Họ tên: "}),e.jsx("input",{...p("hoten"),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                    focus:border-blue-500 focus:border-2`})]}),e.jsx("div",{className:"flex-col flex md:basis-1/6",children:e.jsxs(R,{size:"small",type:"submit",color:"primary",variant:"contained",children:[e.jsx(Y,{})," Lấy dữ liệu"]})})]})}),e.jsx("div",{className:"px-4","data-aos":"fade-left","data-aos-once":"true",children:e.jsx("div",{className:"mt-4",children:e.jsx(I,{list:t,onChangeStatus:D})})})]})};export{ne as default};
