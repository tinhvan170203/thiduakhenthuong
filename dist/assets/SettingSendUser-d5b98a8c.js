import{r as d,j as l}from"./index-371a4e8f.js";import"./index.esm-a80e06b2.js";import{u as L}from"./index.esm-dbde89ce.js";const R=({label:v,values:n,onChangeRoleList:C,roleNow:o,resetCheckbox:g})=>{const[a,u]=d.useState([]),[s,r]=d.useState([]),[i,k]=d.useState("");d.useEffect(()=>{u(n),r(n)},[n]),d.useEffect(()=>{g&&(u(n),r(n))},[g]),d.useEffect(()=>{if(a.length>0){const e=setTimeout(()=>{let c=[...a].filter(m=>m.name.toLowerCase().includes(i.toLowerCase()));r(c)},500);return()=>clearTimeout(e)}},[i]),d.useEffect(()=>{if(o){let e=[];n.forEach(c=>{o.findIndex(m=>m.value===c.value)!==-1?e.push({value:c.value,name:c.name,isChecked:!0}):e.push({value:c.value,name:c.name,isChecked:!1})}),u(e);let h=e.filter(c=>c.name.toLowerCase().includes(i.toLowerCase()));r(h)}else{u(n);let e=n.filter(h=>h.name.toLowerCase().includes(i.toLowerCase()));r(e)}},[o,n]);const w=e=>{const{name:h,value:c,checked:m}=e.target;if(h==="allSelect"){let p=s.map(t=>({...t,isChecked:m}));r(p);let j=a.map(t=>{let y=p.findIndex(E=>E.value.includes(t.value));return y!==-1?{...t,isChecked:p[y].isChecked}:t});u(j);let f=[],x=[];j.forEach(t=>{t.isChecked===!0?f.push({value:t.value,name:t.name}):x.push({value:t.value,name:t.name})}),C(f,x)}else{let p=a.map(t=>t.value===c?{...t,isChecked:m}:t),j=s.map(t=>t.value===c?{...t,isChecked:m}:t);r(j),u(p);let f=[],x=[];p.forEach(t=>{t.isChecked===!0?f.push({value:t.value,name:t.name}):x.push({value:t.value,name:t.name})}),C(f,x)}},S=e=>{k(e.target.value)};return l.jsxs("div",{className:"my-2 md:basis-1/4 h-[300px] overflow-y-scroll hide-scrollbar",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"",children:l.jsx("span",{className:" font-semibold uppercase text-red-600",children:v})}),l.jsx("input",{className:"w-4 h-4",type:"checkbox",checked:s.filter(e=>(e==null?void 0:e.isChecked)===!0).length===s.length&&s.length!==0,name:"allSelect",value:"allSelect",onChange:w,disabled:s.length===0})]}),l.jsx("div",{children:l.jsx("input",{disabled:a.length===0,onChange:e=>S(e),type:"text",className:a.length===0?"hidden":"outline-none border w-full my-2 rounded-md text-sm px-2 text-red-600",placeholder:`Tìm kiếm trong ${v}`})}),s&&s.map((e,h)=>l.jsxs("div",{className:"flex items-center space-x-2 ml-2",children:[l.jsx("input",{className:"w-4 h-4",type:"checkbox",checked:e==null?void 0:e.isChecked,name:e.name,value:e.value,onChange:w}),l.jsx("label",{children:e.name})]},e.name))]})};function F({onSubmit:v,list:n,resetCheckbox:C}){L({defaultValues:{}});const[o,g]=d.useState([]);let a=[];const u=(s,r)=>{a=[...o],r.length>0&&r.forEach(i=>{let k=a.findIndex(w=>w.value===i.value);k!==-1&&a.splice(k,1)}),a=a.concat(s),a=Array.from(new Map(a.map(i=>[i.value,i])).values()),g(a),v(a)};return l.jsx(l.Fragment,{children:l.jsx("div",{className:"flex flex-col md:flex-row flex-wrap",children:n.length>0&&n.map(s=>{if(s.accounts.length>0)return l.jsx(R,{label:s.khoi,values:s.accounts,onChangeRoleList:u,roleNow:o,resetCheckbox:C},s.khoi)})})})}export{F as S};
