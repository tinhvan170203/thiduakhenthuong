import{r as g,j as e,c as w,d as S,u as B,Q as j,N as R,e as _}from"./index-469ebc4a.js";import"./index.esm-a80e06b2.js";import{d as v}from"./Search-9d8f7eda.js";import{T as b,a as i,P as m,b as D,c as $,d as M,e as z,f as O,g as C,h as y,i as P,j as k}from"./LastPage-511a91a0.js";import{d as A}from"./dayjs.min-e05fe7c1.js";import{P as H,B as q,I as f}from"./MenuItem-22e0308b.js";import"./index-a8606d44.js";import{c as E}from"./canboApi-a16ae5b6.js";import{B as Y}from"./Button-e3d685a6.js";import"./createSvgIcon-e7baeffd.js";import"./ButtonBase-ea83d2d9.js";const I=({row:n,page:s,rowsPerPage:c,index:a})=>(g.useState(!1),g.useState(null),e.jsxs(b,{className:"hover:bg-slate-200 transition duration-300",children:[e.jsx(i,{className:"border-r border-slate-300",align:"left",style:{fontWeight:"bold"},children:s*c+a}),e.jsx(i,{className:"border-r border-slate-300",align:"left",children:e.jsx("span",{className:"font-semibold",children:n.hoten})}),e.jsx(i,{className:"border-r border-slate-300",align:"left",children:A(n.ngaysinh).format("DD/MM/YYYY")}),e.jsx(i,{className:"border-r border-slate-300",align:"left",children:n.nghihuu===!0?e.jsx("span",{children:"Đã nghỉ hưu"}):e.jsx("span",{children:" Đã chuyển công tác khỏi đơn vị"})}),e.jsx(i,{align:"right",className:" flex justify-center items-center space-x-1 transition duration-300",style:{width:"200px"},children:e.jsx("p",{onClick:()=>window.open(`/dashboard/chi-tiet-ca-nhan/${n._id}`,"_blank","noreferrer"),className:"hover:cursor-pointer font-bold hover:underline text-red-600",children:"Trang cá nhân"})})]},n._id));function N(n){const s=w(),{count:c,page:a,rowsPerPage:p,onPageChange:d}=n,u=t=>{d(t,0)},x=t=>{d(t,a-1)},r=t=>{d(t,a+1)},h=t=>{d(t,Math.max(0,Math.ceil(c/p)-1))};return e.jsxs(q,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(f,{onClick:u,disabled:a===0,"aria-label":"first page",children:s.direction==="rtl"?e.jsx(C,{}):e.jsx(y,{})}),e.jsx(f,{onClick:x,disabled:a===0,"aria-label":"previous page",children:s.direction==="rtl"?e.jsx(P,{}):e.jsx(k,{})}),e.jsx(f,{onClick:r,disabled:a>=Math.ceil(c/p)-1,"aria-label":"next page",children:s.direction==="rtl"?e.jsx(k,{}):e.jsx(P,{})}),e.jsx(f,{onClick:h,disabled:a>=Math.ceil(c/p)-1,"aria-label":"last page",children:s.direction==="rtl"?e.jsx(y,{}):e.jsx(C,{})})]})}N.propTypes={count:m.number.isRequired,onPageChange:m.func.isRequired,page:m.number.isRequired,rowsPerPage:m.number.isRequired};function L({list:n}){const[s,c]=g.useState(0),[a,p]=g.useState(10);g.useEffect(()=>{},[n]);const d=s>0?Math.max(0,(1+s)*a-n.length):0,u=(r,h)=>{c(h)},x=r=>{p(parseInt(r.target.value,10)),c(0)};return e.jsxs(e.Fragment,{children:[e.jsx(D,{component:H,children:e.jsxs($,{"aria-label":"custom pagination table",children:[e.jsx(M,{children:e.jsxs(b,{children:[e.jsx(i,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(143 1 1)"},children:"#"}),e.jsx(i,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(143 1 1)"},children:"Họ và tên"}),e.jsx(i,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(143 1 1)"},children:"Ngày sinh"}),e.jsx(i,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(143 1 1)"},children:"Trạng thái"}),e.jsx(i,{align:"center",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(143 1 1)",width:"100px"},children:"Thao tác"})]})}),e.jsxs(z,{children:[(a>0?n.slice(s*a,s*a+a):n).map((r,h)=>e.jsx(I,{row:r,page:s,rowsPerPage:a,index:h+1},r._id)),d>0&&e.jsx(b,{style:{height:53*d},children:e.jsx(i,{colSpan:6})})]})]})}),e.jsx("div",{children:e.jsx(O,{rowsPerPageOptions:[10,25,50,100,{label:"Tất cả",value:-1}],count:n.length,rowsPerPage:a,page:s,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},component:"div",onPageChange:u,onRowsPerPageChange:x,ActionsComponent:N,labelRowsPerPage:"Số bản ghi hiển thị trên mỗi trang",labelDisplayedRows:function({from:h,to:t,count:l}){return`hiển thị ${h} đến ${t} bản ghi trong tổng số ${l!==-1?l:`more than ${t}`} bản ghi`}})})]})}const ae=()=>{let n=S(l=>l.authReducer.vaitro_theodoithidua);const s=B();if(n!=="Quản trị thông thường")return j.error("Tài khoản không có truy cập trang này",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!1,draggable:!1,progress:void 0,theme:"light"}),e.jsx(R,{to:"/login",replace:!0});const[c,a]=g.useState([]),[p,d]=g.useState([]),[u,x]=_(),[r,h]=g.useState("");g.useEffect(()=>{(async()=>{x(!0);try{let o=await E.fetchCanboTungCongtac();console.log(o.data),a(o.data),d(o.data),x(!1)}catch(o){o.message==="Token không hợp lệ hoặc đã hết hạn. Vui lòng đăng nhập lại"&&(s("/login"),x(!1),j.error(o.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!1,draggable:!1,progress:void 0,theme:"light"})),x(!1),console.log(o.message)}})()},[]);const t=l=>{l.preventDefault();let o=[...p];o=o.filter(T=>T.hoten.toUpperCase().includes(r.toUpperCase())),a(o)};return e.jsxs("div",{"data-aos":"fade-left","data-aos-once":"true",children:[e.jsx("div",{className:"my-2",children:e.jsx("h4",{className:"uppercase font-bold text-blue-800 text-sm md:text-[18px]",children:"Quản trị cán bộ, chiến sĩ đã từng công tác và hiện nay không còn công tác tại đơn vị"})}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"shadow-md shadow-gray-400 mr-2",children:e.jsxs("form",{className:"mt-2 px-4 py-4 bg-slate-200 rounded-md md:bg-white",onSubmit:l=>t(l),children:[e.jsxs("h5",{className:"font-bold",children:[e.jsx(v,{})," Tra cứu cán bộ, chiến sĩ"]}),e.jsx("div",{className:"flex flex-col md:flex-row md:items-center flex-wrap",children:e.jsxs("div",{className:"flex-col flex flex-1 px-2",children:[e.jsx("label",{className:"text-[14px] font-semibold",children:" Họ và tên: "}),e.jsx("input",{value:r,name:"tentaikhoanSearch",onChange:l=>h(l.target.value),type:"text",className:`outline-none my-2 border rounded-md p-2 px-3 border-neutral-600\r
                  focus:border-blue-500 focus:border-2`})]})}),e.jsx("div",{className:"md:space-x-2  ml-2  space-y-2 mt-2 md:space-y-0 md:block flex flex-col items-center",children:e.jsxs(Y,{type:"submit",size:"small",sx:{width:"220px"},variant:"contained",children:[e.jsx(v,{})," Tìm kiếm"]})})]})}),e.jsxs("div",{className:"shadow-md shadow-gray-400 mr-2",children:[e.jsx("p",{className:"text-center text-lg my-8 font-semibold mb-8",children:"Danh sách cán bộ, chiến sĩ đã từng công tác và hiện nay không còn công tác tại đơn vị"}),e.jsx("div",{className:"px-2",children:e.jsx(L,{list:c})})]})]})]})};export{ae as default};
