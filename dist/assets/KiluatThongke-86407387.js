import{j as e,r as u,c as q,e as I,u as X,d as G,Q as w}from"./index-469ebc4a.js";import{d as J}from"./Search-9d8f7eda.js";import{u as U,C as B}from"./index.esm-e24acc70.js";import{S as $}from"./react-select.esm-ea0f231f.js";import{C as Z,d as ee}from"./FileDownload-8fac1ea7.js";import{t as _}from"./thongkeApi-7ce5f50b.js";import{T as N,a as s,P as p,b as z,c as M,d as H,e as W,f as K,g as v,h as C,i as P,j as S}from"./LastPage-511a91a0.js";import{d as O}from"./dayjs.min-e05fe7c1.js";import{B as T}from"./Button-e3d685a6.js";import{P as L,B as Q,I as b}from"./MenuItem-22e0308b.js";import"./createSvgIcon-e7baeffd.js";import"./ButtonBase-ea83d2d9.js";import"./memoize-one.esm-c82963f8.js";import"./Link-3fd13359.js";const ae=({row:l,page:n,rowsPerPage:i,index:a})=>e.jsxs(N,{className:"hover:bg-slate-200 transition duration-300",children:[e.jsx(s,{className:"border-r border-slate-300",align:"left",style:{fontWeight:"bold"},children:n*i+a}),e.jsx(s,{className:"border-r border-slate-300",align:"left",children:e.jsx("span",{className:"font-bold",children:l.soQD})}),e.jsx(s,{className:"border-r border-slate-300",align:"left",children:l.hinhthuc}),e.jsx(s,{className:"border-r border-slate-300",align:"left",children:l.nguoiky}),e.jsx(s,{className:"border-r border-slate-300",align:"left",children:l.doituongkhen}),e.jsx(s,{className:"border-r border-slate-300",align:"left",children:O(l.ngayky).format("DD/MM/YYYY")}),e.jsx(s,{className:"border-r border-slate-300",align:"left",children:l.noidung}),e.jsx(s,{align:"right",className:"bg-gray-300 flex justify-center items-center space-x-1 hover:bg-slate-500 transition duration-300",style:{width:"180px"},children:e.jsx(T,{variant:"contained",color:"info",size:"small",onClick:()=>window.open(`/dashboard/chi-tiet-ca-nhan/${l.id_canhan}`,"_blank","noreferrer"),children:"Trang cá nhân"})})]},l._id);function Y(l){const n=q(),{count:i,page:a,rowsPerPage:h,onPageChange:o}=l,x=t=>{o(t,0)},d=t=>{o(t,a-1)},r=t=>{o(t,a+1)},c=t=>{o(t,Math.max(0,Math.ceil(i/h)-1))};return e.jsxs(Q,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(b,{onClick:x,disabled:a===0,"aria-label":"first page",children:n.direction==="rtl"?e.jsx(v,{}):e.jsx(C,{})}),e.jsx(b,{onClick:d,disabled:a===0,"aria-label":"previous page",children:n.direction==="rtl"?e.jsx(P,{}):e.jsx(S,{})}),e.jsx(b,{onClick:r,disabled:a>=Math.ceil(i/h)-1,"aria-label":"next page",children:n.direction==="rtl"?e.jsx(S,{}):e.jsx(P,{})}),e.jsx(b,{onClick:c,disabled:a>=Math.ceil(i/h)-1,"aria-label":"last page",children:n.direction==="rtl"?e.jsx(C,{}):e.jsx(v,{})})]})}Y.propTypes={count:p.number.isRequired,onPageChange:p.func.isRequired,page:p.number.isRequired,rowsPerPage:p.number.isRequired};function ne({list:l}){const[n,i]=u.useState(0),[a,h]=u.useState(10),o=n>0?Math.max(0,(1+n)*a-l.length):0,x=(r,c)=>{i(c)},d=r=>{h(parseInt(r.target.value,10)),i(0)};return e.jsxs(e.Fragment,{children:[e.jsx(z,{component:L,children:e.jsxs(M,{"aria-label":"custom pagination table",children:[e.jsx(H,{children:e.jsxs(N,{children:[e.jsx(s,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(143 1 1)"},children:"#"}),e.jsx(s,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(143 1 1)"},children:"Số quyết định"}),e.jsx(s,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(143 1 1)"},children:"Hình thức"}),e.jsx(s,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(143 1 1)"},children:"Người ký"}),e.jsx(s,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(143 1 1)"},children:"Cá nhân bị kỉ luật"}),e.jsx(s,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(143 1 1)"},children:"Ngày ký"}),e.jsx(s,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"200px",backgroundColor:"rgb(143 1 1)"},children:"Nội dung kỉ luật"}),e.jsx(s,{align:"center",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(143 1 1)",maxWidth:"150px"},children:"Thao tác"})]})}),e.jsxs(W,{children:[(a>0?l.slice(n*a,n*a+a):l).map((r,c)=>e.jsx(ae,{row:r,page:n,rowsPerPage:a,index:c+1},r._id)),o>0&&e.jsx(N,{style:{height:53*o},children:e.jsx(s,{colSpan:6})})]})]})}),e.jsx("div",{children:e.jsx(K,{rowsPerPageOptions:[10,25,50,100,{label:"Tất cả",value:-1}],count:l.length,rowsPerPage:a,page:n,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},component:"div",onPageChange:x,onRowsPerPageChange:d,ActionsComponent:Y,labelRowsPerPage:"Số bản ghi hiển thị trên mỗi trang",labelDisplayedRows:function({from:c,to:t,count:k}){return`hiển thị ${c} đến ${t} bản ghi trong tổng số ${k!==-1?k:`more than ${t}`} bản ghi`}})})]})}function A(l){const n=q(),{count:i,page:a,rowsPerPage:h,onPageChange:o}=l,x=t=>{o(t,0)},d=t=>{o(t,a-1)},r=t=>{o(t,a+1)},c=t=>{o(t,Math.max(0,Math.ceil(i/h)-1))};return e.jsxs(Q,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(b,{onClick:x,disabled:a===0,"aria-label":"first page",children:n.direction==="rtl"?e.jsx(v,{}):e.jsx(C,{})}),e.jsx(b,{onClick:d,disabled:a===0,"aria-label":"previous page",children:n.direction==="rtl"?e.jsx(P,{}):e.jsx(S,{})}),e.jsx(b,{onClick:r,disabled:a>=Math.ceil(i/h)-1,"aria-label":"next page",children:n.direction==="rtl"?e.jsx(S,{}):e.jsx(P,{})}),e.jsx(b,{onClick:c,disabled:a>=Math.ceil(i/h)-1,"aria-label":"last page",children:n.direction==="rtl"?e.jsx(C,{}):e.jsx(v,{})})]})}A.propTypes={count:p.number.isRequired,onPageChange:p.func.isRequired,page:p.number.isRequired,rowsPerPage:p.number.isRequired};function le({list:l}){const[n,i]=u.useState(0),[a,h]=u.useState(10);n>0&&Math.max(0,(1+n)*a-l.length);const o=(d,r)=>{i(r)},x=d=>{h(parseInt(d.target.value,10)),i(0)};return e.jsxs(e.Fragment,{children:[e.jsx(z,{component:L,children:e.jsxs(M,{"aria-label":"custom pagination table",children:[e.jsx(H,{children:e.jsxs(N,{children:[e.jsx(s,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(143 1 1)"},children:"#"}),e.jsx(s,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(143 1 1)"},children:"Họ và tên"}),e.jsx(s,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(143 1 1)"},children:"Số lượt bị kỉ luật"}),e.jsx(s,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(143 1 1)"},children:"Chi tiết"})]})}),e.jsx(W,{children:(a>0?l.slice(n*a,n*a+a):l).map((d,r)=>e.jsxs(N,{className:"hover:bg-slate-200 transition duration-300",children:[e.jsx(s,{className:"border-r border-slate-300",align:"left",style:{fontWeight:"bold"},children:n*a+r+1}),e.jsx(s,{className:"border-r border-slate-300",align:"left",children:e.jsx("span",{className:"font-bold",children:d.doituongkhen})}),e.jsx(s,{className:"border-r border-slate-300",align:"left",children:d.soluotkhen}),e.jsx(s,{className:"border-r border-slate-300",align:"right",children:e.jsx(T,{variant:"contained",color:"info",size:"small",onClick:()=>window.open(`/dashboard/chi-tiet-ca-nhan/${d.id_canhan}`,"_blank","noreferrer"),children:"Trang cá nhân"})})]},d._id))})]})}),e.jsx("div",{children:e.jsx(K,{rowsPerPageOptions:[10,25,50,100,{label:"Tất cả",value:-1}],count:l.length,rowsPerPage:a,page:n,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},component:"div",onPageChange:o,onRowsPerPageChange:x,ActionsComponent:A,labelRowsPerPage:"Số bản ghi hiển thị trên mỗi trang",labelDisplayedRows:function({from:r,to:c,count:t}){return`hiển thị ${r} đến ${c} bản ghi trong tổng số ${t!==-1?t:`more than ${c}`} bản ghi`}})})]})}let se=[{label:"STT",key:"stt"},{label:"Số quyết định",key:"soQD"},{label:"Hình thức",key:"hinhthuc"},{label:"Người ký",key:"nguoiky"},{label:"Cá nhân bị kỷ luật",key:"canhanbikiluat"},{label:"Ngày ký",key:"ngayky"},{label:"Nội dung",key:"noidung"}];const Ne=()=>{const[l,n]=u.useState([]);let[i,a]=u.useState([]);const[h,o]=I(),[x,d]=u.useState([]),r=X(),[c,t]=u.useState([]),k=G(g=>g.authReducer.vaitro_theodoithidua);u.useEffect(()=>{(async()=>{try{let f=await _.getDonviDois({vaitro:k});t(f.data.data_donvi)}catch(f){f.message==="Token không hợp lệ hoặc đã hết hạn. Vui lòng đăng nhập lại"&&(r("/login"),w.error(f.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})),console.log(f.message)}})()},[]);const{register:y,handleSubmit:F,control:R,resetField:te,setValue:re,watch:D,formState:{errors:ie}}=U({defaultValues:{hinhthuc:{label:"Tất cả",value:""},donvi:{label:"Tất cả",value:""},tungay:"",denngay:"",soQD:"",noidung:"",nguoiky:""}}),E=async g=>{let f={...g,hinhthuc:g.hinhthuc.value,donvi:g.donvi.value,vaitro:k};o(!0);try{let m=await _.getKiluats(f);n(m.data.data),a(m.data.data.map((j,V)=>({stt:V+1,soQD:j.soQD,ngayky:O(j.ngayky).format("DD/MM/YYYY"),noidung:j.noidung,nguoiky:j.nguoiky,hinhthuc:j.hinhthuc,canhanbikiluat:j.doituongkhen}))),d(m.data.canhanbikiluats),o(!1),w.success(m.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}catch(m){m.message==="Token không hợp lệ hoặc đã hết hạn. Vui lòng đăng nhập lại"&&(r("/login"),w.error(m.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})),console.log(m.message)}};return e.jsxs("div",{className:"pr-2","data-aos":"fade-left","data-aos-once":"true",children:[e.jsx("div",{className:"my-2",children:e.jsx("h4",{className:"uppercase font-bold text-blue-800 text-sm md:text-[18px]",children:"Thống kê, theo dõi kết quả kỉ luật cá nhân trong đơn vị"})}),e.jsxs("form",{onSubmit:F(E),className:"my-2 mt-4 shadow-gray-400 shadow-md p-4 rounded-lg",children:[e.jsx("div",{className:"flex justify-between",children:e.jsx("h5",{className:"text-[18px] font-semibold",children:"Tra cứu kỷ luật cá nhân"})}),e.jsxs("div",{className:"flex flex-wrap xl:flex-row flex-col flex-1 p-2",children:[e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Số QĐ kỷ luật: "}),e.jsx("input",{...y("soQD"),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                    focus:border-blue-500 focus:border-2`})]}),e.jsxs("div",{className:"flex-col md:basis-1/6 flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Từ ngày: "}),e.jsx("input",{...y("tungay"),type:"date",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:border-blue-500 focus:border-2`})]}),e.jsxs("div",{className:"flex-col md:basis-1/6 flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Đến ngày: "}),e.jsx("input",{...y("denngay"),type:"date",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:border-blue-500 focus:border-2`})]}),e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Người ký: "}),e.jsx("input",{...y("nguoiky"),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:border-blue-500 focus:border-2`})]}),e.jsxs("div",{className:"flex-col md:basis-full flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Nội dung kỷ luật: "}),e.jsx("input",{...y("noidung"),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:border-blue-500 focus:border-2`})]}),e.jsxs("div",{className:"flex-col flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Hình thức kỷ luật: "}),e.jsx(B,{control:R,name:"hinhthuc",render:({field:g})=>e.jsx($,{options:[{label:"Tất cả",value:""},{label:"Khiển trách",value:"Khiển trách"},{label:"Cảnh cáo",value:"Cảnh cáo"},{label:"Hạ cấp bậc hàm",value:"Hạ cấp bậc hàm"},{label:"Tước quân tịch CAND",value:"Tước quân tịch CAND"}],className:"basic-multi-select my-4 p-1",classNamePrefix:"select",placeholder:"Vui lòng chọn hình thức",...g})})]}),e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Đơn vị công tác: "}),e.jsx(B,{control:R,name:"donvi",render:({field:g})=>e.jsx($,{options:c,className:"basic-multi-select my-4 p-1",classNamePrefix:"select",placeholder:"Tất cả",...g})})]})]}),e.jsx("div",{className:"my-2 text-center",children:e.jsxs(T,{type:"submit",color:"primary",variant:"contained",children:[e.jsx(J,{})," Tìm kiếm dữ liệu"]})})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("p",{className:"text-center text-lg mt-8 font-semibold",children:"Danh sách cá nhân vi phạm kỷ luật cá nhân trong đơn vị"}),e.jsxs("div",{className:"my-4",children:[e.jsxs("h4",{className:"text-end",children:["Tổng số: ",e.jsx("span",{className:"font-bold text-xl",children:x.length})," cá nhân bị kỷ luật"]}),e.jsx("div",{className:"my-4",children:e.jsx(le,{list:x})})]}),e.jsxs("div",{className:"my-8 px-2 shadow-md shadow-gray-500 rounded-md",children:[e.jsx("p",{className:"text-center text-lg my-8 font-semibold",children:"Danh sách quyết định kỷ luật của cá nhân trong đơn vị"}),e.jsx("div",{className:"mt-4 text-end md:space-x-2 space-y-2 md:space-y-0 md:block flex flex-col items-center",children:e.jsx(T,{variant:"contained",color:"success",size:"small",children:e.jsxs(Z,{data:i,headers:se,filename:`danhsachkiluat_${D("tungay")}_${D("denngay")}`,children:[e.jsx(ee,{}),e.jsx("span",{className:"text-sm ml-1 text-white",children:"Xuất file excel"})]})})}),e.jsxs("h4",{className:"mb-4 text-end",children:["Tổng số: ",e.jsx("span",{className:"font-bold text-xl",children:l.length})," quyết định kỷ luật"]}),e.jsx(ne,{list:l})]})]})]})};export{Ne as default};
