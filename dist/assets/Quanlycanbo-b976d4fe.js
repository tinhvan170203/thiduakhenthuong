import{d as q,u as O,Q as o,j as e,N as V,r as n,e as B}from"./index-371a4e8f.js";import"./index.esm-a80e06b2.js";import{u as T,C as c}from"./index.esm-dbde89ce.js";import{d as D}from"./Add-b80d7046.js";import{S as t}from"./react-select.esm-68469137.js";import{c as u}from"./canboApi-98c0e799.js";import{B as H}from"./Button-c29e04f7.js";import"./createSvgIcon-b5eb2c40.js";import"./ButtonBase-3ca56fd5.js";import"./memoize-one.esm-8b357e52.js";const J=()=>{let h=q(s=>s.authReducer.vaitro_theodoithidua);const x=O();if(h!=="Quản trị thông thường")return o.error("Tài khoản không có truy cập trang này",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!1,draggable:!1,progress:void 0,theme:"light"}),e.jsx(V,{to:"/login",replace:!0});n.useState([]);const[b,f]=n.useState([]);n.useState(!1);const[p,g]=n.useState([]),[N,v]=n.useState([]),[_,d]=B();n.useState("");const[y,j]=n.useState("Nam"),[C,S]=n.useState(!0),{register:l,handleSubmit:k,control:i,resetField:w,watch:Q,setValue:m,formState:{errors:E}}=T({defaultValues:{hoten:"",gioitinh:{value:"Nam",label:"Nam"},dangvien:{label:"Có",value:!0}}});n.useEffect(()=>{(async()=>{try{let r=await u.getDataForAddPerson();f(r.data.dois.map(a=>({value:a._id,label:a.tendoi}))),v(r.data.chucvus.map(a=>({value:a._id,label:a.chucvu}))),g(r.data.bachams.map(a=>({value:a._id,label:a.bacham})))}catch(r){r.message==="Token không hợp lệ hoặc đã hết hạn. Vui lòng đăng nhập lại"&&(x("/login"),o.error(r.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})),console.log(r.message)}})()},[]);const P=async s=>{let r={...s};d(!0);try{let a=await u.addPerson(r);setTimeout(()=>{d(!1)},400),w("hoten"),o.success(a.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}catch(a){o.error(a.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),d(!1)}};return e.jsxs("div",{className:"pr-2","data-aos":"fade-left","data-aos-once":"true",children:[e.jsx("div",{className:"my-2",children:e.jsx("h4",{className:"uppercase font-bold text-blue-800 text-sm md:text-[18px]",children:"Thêm mới cán bộ, chiến sĩ thuộc đơn vị"})}),e.jsx("h3",{className:"my-2 italic text-red-700 ml-2 mb-4",children:"Lưu ý: Tạo mới cán bộ, chiến sĩ chỉ được thực hiện đối với cán bộ đến nhận công tác tại Công an tỉnh lần đầu tiên, cần kiểm tra kỹ lại xem trong hệ thống có dữ liệu của cán bộ đó chưa để tránh việc trùng lặp dữ liệu."}),e.jsx("form",{className:"mt-2 mx-2",onSubmit:k(P),children:e.jsxs("div",{className:"flex space-x-2 items-start",children:[e.jsx("img",{src:y==="Nam"?"/namcongan.png":"/anhnucongan.png",alt:"avatar",className:"w-auto h-full shadow-md shadow-gray-500"}),e.jsxs("div",{className:"shadow-md shadow-gray-500 p-2 rounded-md",children:[e.jsxs("div",{className:"flex flex-wrap xl:flex-row flex-col flex-1",children:[e.jsxs("div",{className:"flex-col flex md:basis-1/3 flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Họ và tên: "]}),e.jsx("input",{...l("hoten",{required:!0}),type:"text",className:`outline-none my-4 rouned-md border rounded-md p-2 border-neutral-300\r
                  focus:border-blue-500 focus:border-2`})]}),e.jsxs("div",{className:"flex-col flex flex-1 md:basis-1/6 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Giới tính:"]}),e.jsx(t,{...l("gioitinh"),name:"gioitinh",options:[{value:"Nam",label:"Nam"},{value:"Nữ",label:"Nữ"}],className:"basic-multi-select my-4 rouned-md",classNamePrefix:"select",defaultValue:{value:"Nam",label:"Nam"},onChange:s=>{j(s.value),m("gioitinh",s)}})]}),e.jsxs("div",{className:"flex-col flex md:basis-1/6 flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Ngày sinh: "]}),e.jsx("input",{...l("ngaysinh"),placeholder:"dd-mm-yyyy",type:"date",className:`outline-none my-4 rouned-md border rounded-md p-2 border-neutral-300\r
                  focus:border-blue-500 focus:border-2`,required:!0})]}),e.jsxs("div",{className:"flex-col flex flex-1 md:basis-1/6 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Đảng viên:"}),e.jsx(t,{required:!0,...l("dangvien"),options:[{value:!0,label:"Có"},{value:!1,label:"Không"}],className:"basic-multi-select my-4 rouned-md",classNamePrefix:"select",defaultValue:{value:!0,label:"Có"},onChange:s=>{S(s.value),m("dangvien",s)}})]}),e.jsxs("div",{className:"flex-col flex flex-1 md:basis-1/4 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Cấp bậc hàm:"}),e.jsx(c,{control:i,name:"bacham",render:({field:s})=>e.jsx(t,{options:p,className:"basic-multi-select my-4 rouned-md",classNamePrefix:"select",placeholder:"Vui lòng chọn cấp hàm",required:!0,...s})})]}),e.jsxs("div",{className:"flex-col flex flex-1 md:basis-1/4 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Chức vụ công tác:"}),e.jsx(c,{control:i,name:"chucvu",render:({field:s})=>e.jsx(t,{required:!0,options:N,className:"basic-multi-select my-4 rouned-md",classNamePrefix:"select",placeholder:"Vui lòng chọn chức vụ",...s})})]}),e.jsxs("div",{className:"flex-col flex md:basis-1/4 flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Ngày lên quân hàm hiện tại: "]}),e.jsx("input",{...l("ngaylenham"),placeholder:"dd-mm-yyyy",type:"date",className:`outline-none my-4 rouned-md border rounded-md p-2 border-neutral-300\r
                  focus:border-blue-500 focus:border-2`,required:!0})]}),e.jsxs("div",{className:"flex-col flex md:basis-1/4 flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Ngày giữ chức vụ hiện tại: "]}),e.jsx("input",{...l("ngaygiuchucvu"),placeholder:"dd-mm-yyyy",type:"date",className:`outline-none my-4 rouned-md border rounded-md p-2 border-neutral-300\r
                  focus:border-blue-500 focus:border-2`,required:!0})]}),e.jsxs("div",{className:"flex-col flex md:basis-1/4 flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Ngày nhận QĐ về đội, tổ: "]}),e.jsx("input",{...l("ngayvedonvi"),placeholder:"dd-mm-yyyy",type:"date",className:`outline-none my-4 rouned-md border rounded-md p-2 border-neutral-300\r
                  focus:border-blue-500 focus:border-2`,required:!0})]}),e.jsxs("div",{className:"flex-col flex flex-1 md:basis-1/4 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Đội nghiệp vụ (tổ công tác):"]}),e.jsx(c,{control:i,name:"donvi",render:({field:s})=>e.jsx(t,{options:b,className:"basic-multi-select my-4 rouned-md",classNamePrefix:"select",placeholder:"Vui lòng chọn đội, tổ công tác",required:!0,...s})})]}),C===!0?e.jsxs("div",{className:"flex-col flex md:basis-1/4 flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Ngày kết nạp vào đảng: "]}),e.jsx("input",{...l("ngayvaodang"),placeholder:"dd-mm-yyyy",type:"date",className:`outline-none my-4 rouned-md border rounded-md p-2 border-neutral-300\r
                  focus:border-blue-500 focus:border-2`})]}):"",e.jsxs("div",{className:"items-center space-x-2 flex md:basis-1/4 flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"}),"Đoàn viên: "]}),e.jsx("input",{...l("doanvien"),type:"checkbox",className:`outline-none my-4 rouned-md border rounded-md p-2 border-neutral-300 w-6 h-6\r
                  focus:border-blue-500 focus:border-2`})]})]}),e.jsx("div",{className:"md:space-x-2 space-y-2 md:space-y-0 md:block flex flex-col items-center mt-4",children:e.jsxs(H,{type:"submit",color:"primary",variant:"contained",children:[e.jsx(D,{})," Thêm mới"]})})]})]})})]})};export{J as default};
