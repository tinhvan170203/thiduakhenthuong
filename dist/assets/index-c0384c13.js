import{r as h,j as e,c as M,s as W,h as E,d as S,e as A,u as F,Q as y}from"./index-469ebc4a.js";import"./index.esm-a80e06b2.js";import{u as I,C as w}from"./index.esm-e24acc70.js";import{d as V}from"./Search-9d8f7eda.js";import"./DialogDelete-28d67f98.js";import{T as k,a as l,P as C,b as Q,c as G,d as J,e as K,f as U,g as R,h as _,i as B,j as D}from"./LastPage-511a91a0.js";import{P as X,B as Y,I as b}from"./MenuItem-22e0308b.js";import{S as Z}from"./Cancel-be6c3443.js";import{t as L}from"./thongkeApi-7ce5f50b.js";import{S as O}from"./react-select.esm-ea0f231f.js";import{B as ee}from"./Button-e3d685a6.js";import"./createSvgIcon-e7baeffd.js";import"./ButtonBase-ea83d2d9.js";import"./memoize-one.esm-c82963f8.js";const ae=({row:a,page:i,rowsPerPage:c,index:s,onClickOpenDialogEdit:d,onClickOpenDialogDelete:n})=>(h.useState(null),e.jsxs(k,{className:"hover:bg-slate-200 transition duration-300",children:[e.jsx(l,{className:"border-r border-slate-300",align:"left",style:{fontWeight:"bold"},children:i*c+s}),e.jsx(l,{className:"border-r border-slate-300",align:"left",children:a.hoten}),e.jsx(l,{className:"border-r border-slate-300",align:"left",children:a.bachamPopulate[0].bacham}),e.jsx(l,{className:"border-r border-slate-300",align:"left",children:a.chucvuPopulate[0].chucvu}),e.jsxs(l,{className:"border-r border-slate-300",align:"left",children:[a.donviPopulate.tendoi," - ",a.accounts[0]]}),e.jsx(l,{className:"border-r border-slate-300",align:"left",children:a.chuyencongtacngoaitinh===!0?e.jsx("p",{children:"Đã chuyển công tác ngoại tỉnh"}):e.jsx("div",{children:a.nghihuu===!0?e.jsx("p",{children:"Đã nghỉ hưu (ra quân)"}):e.jsx("p",{children:"Đang công tác trong Công an tỉnh"})})}),e.jsx(l,{align:"right",className:"",style:{width:"180px"},children:e.jsx("p",{onClick:()=>window.open(`/dashboard/chi-tiet-ca-nhan/${a._id}`,"_blank","noreferrer"),className:"hover:cursor-pointer font-bold hover:underline text-red-600",children:"Trang cá nhân"})})]},a._id));function $(a){const i=M(),{count:c,page:s,rowsPerPage:d,onPageChange:n}=a,p=t=>{n(t,0)},u=t=>{n(t,s-1)},m=t=>{n(t,s+1)},f=t=>{n(t,Math.max(0,Math.ceil(c/d)-1))};return e.jsxs(Y,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(b,{onClick:p,disabled:s===0,"aria-label":"first page",children:i.direction==="rtl"?e.jsx(R,{}):e.jsx(_,{})}),e.jsx(b,{onClick:u,disabled:s===0,"aria-label":"previous page",children:i.direction==="rtl"?e.jsx(B,{}):e.jsx(D,{})}),e.jsx(b,{onClick:m,disabled:s>=Math.ceil(c/d)-1,"aria-label":"next page",children:i.direction==="rtl"?e.jsx(D,{}):e.jsx(B,{})}),e.jsx(b,{onClick:f,disabled:s>=Math.ceil(c/d)-1,"aria-label":"last page",children:i.direction==="rtl"?e.jsx(_,{}):e.jsx(R,{})})]})}$.propTypes={count:C.number.isRequired,onPageChange:C.func.isRequired,page:C.number.isRequired,rowsPerPage:C.number.isRequired};function se({list:a,onClickOpenDialogEdit:i,onClickOpenDialogDelete:c}){const[s,d]=h.useState(0),[n,p]=h.useState(10),u=s>0?Math.max(0,(1+s)*n-a.length):0,m=(t,g)=>{d(g)},f=t=>{p(parseInt(t.target.value,10)),d(0)};return e.jsxs(e.Fragment,{children:[e.jsx(Q,{component:X,children:e.jsxs(G,{"aria-label":"custom pagination table",children:[e.jsx(J,{children:e.jsxs(k,{children:[e.jsx(l,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(143 1 1)"},children:"#"}),e.jsx(l,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(143 1 1)"},children:"Họ và tên"}),e.jsx(l,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(143 1 1)"},children:"Cấp bậc"}),e.jsx(l,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(143 1 1)"},children:"Chức vụ"}),e.jsx(l,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"200px",backgroundColor:"rgb(143 1 1)"},children:"Đơn vị"}),e.jsx(l,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"200px",backgroundColor:"rgb(143 1 1)"},children:"Trạng thái"}),e.jsx(l,{align:"center",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(143 1 1)",maxWidth:"150px"},children:"Thao tác"})]})}),e.jsxs(K,{children:[(n>0?a.slice(s*n,s*n+n):a).map((t,g)=>e.jsx(ae,{row:t,page:s,rowsPerPage:n,index:g+1,onClickOpenDialogEdit:i,onClickOpenDialogDelete:c},t._id)),u>0&&e.jsx(k,{style:{height:53*u},children:e.jsx(l,{colSpan:6})})]})]})}),e.jsx("div",{children:e.jsx(U,{rowsPerPageOptions:[10,25,50,100,{label:"Tất cả",value:-1}],count:a.length,rowsPerPage:n,page:s,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},component:"div",onPageChange:m,onRowsPerPageChange:f,ActionsComponent:$,labelRowsPerPage:"Số bản ghi hiển thị trên mỗi trang",labelDisplayedRows:function({from:g,to:j,count:v}){return`hiển thị ${g} đến ${j} bản ghi trong tổng số ${v!==-1?v:`more than ${j}`} bản ghi`}})})]})}h.forwardRef(function(i,c){return e.jsx(Z,{direction:"up",ref:c,...i})});W(b)({position:"absolute",right:"16px",top:"4px"});const je=()=>{E();const a=S(o=>o.authReducer.vaitro_theodoithidua),[i,c]=h.useState([]),[s,d]=A(),n=F(),[p,u]=h.useState([]),[m,f]=h.useState([]),[t,g]=h.useState([]),{register:j,handleSubmit:v,control:N,resetField:te,setValue:P,watch:T,formState:{errors:ne}}=I({defaultValues:{hoten:"",donvi:{label:"Tất cả",value:""}}});h.useEffect(()=>{(async()=>{try{let r=await L.getDonviDois({vaitro:a});a==="Quản trị thông thường"?(u(r.data.data_donvi.slice(0,1)),P("donvi",r.data.data_donvi.slice(0,1)[0])):u(r.data.data_donvi),f(r.data.data_doi),g(r.data.data_doi.slice(1))}catch(r){r.message==="Token không hợp lệ hoặc đã hết hạn. Vui lòng đăng nhập lại"&&(n("/login"),y.error(r.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})),console.log(r.message)}})()},[]),h.useEffect(()=>{let o=T("donvi").value,r=[...m];if(o==="")g(r.slice(1)),P("doi",{label:"Tất cả",value:""});else{let x=r.filter(H=>H.donvi===o),q=[{label:"Tất cả",value:""}].concat(x);g(q),P("doi",{label:"Tất cả",value:""})}},[T("donvi")]);const z=async o=>{let r={...o};d(!0);try{let x=await L.searchCanbo(r);c(x.data),d(!1),y.success(x.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,theme:"light"})}catch(x){y.error(x.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,theme:"light"}),d(!1)}};return S(o=>o.authReducer.id_user),e.jsxs("div",{className:"pr-2","data-aos":"fade-left","data-aos-once":"true",children:[e.jsx("div",{className:"my-2",children:e.jsx("h4",{className:"uppercase font-bold text-blue-800 text-sm md:text-[18px]",children:"Tra cứu cán bộ, chiến sĩ"})}),e.jsxs("form",{className:"mt-2 flex px-6 flex-wrap py-4 shadow-gray-400 shadow-md",onSubmit:v(z),children:[e.jsxs("div",{className:"basis-1/3 flex flex-col px-2",children:[e.jsx("label",{className:"underline font-semibold",children:" Họ và tên: "}),e.jsx("input",{...j("hoten"),type:"text",className:`outline-none my-4 border rounded-md w-full p-2 py-[8px] border-neutral-600\r
                  focus:border-blue-500 focus:border-2`})]}),e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Đơn vị: "}),e.jsx(w,{control:N,name:"donvi",render:({field:o})=>e.jsx(O,{isDisabled:p.length===1,options:p,className:"basic-multi-select my-4 p-1",classNamePrefix:"select",placeholder:"Tất cả",...o})})]}),e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Tổ, đội công tác: "}),e.jsx(w,{control:N,name:"doi",render:({field:o})=>e.jsx(O,{options:t,className:"basic-multi-select my-4 p-1",classNamePrefix:"select",placeholder:"Tất cả",...o})})]}),e.jsx("div",{className:"md:space-x-2 space-y-2 md:space-y-0 md:block flex flex-col items-center",children:e.jsxs(ee,{type:"submit",color:"primary",variant:"contained",children:[e.jsx(V,{})," Tìm kiếm dữ liệu"]})})]}),e.jsxs("div",{className:"mt-6 shadow-black shadow-sm px-2",children:[e.jsx("p",{className:"text-center text-lg my-8 font-semibold mb-8",children:"Danh sách kết quả cán bộ, chiến sĩ tìm thấy trong hệ thống phần mềm"}),e.jsx(se,{list:i})]})]})};export{je as default};
